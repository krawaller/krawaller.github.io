(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4lHg":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/a-react-js-case-study",function(){var e=t("w3Xf");return{page:e.default||e}}])},w3Xf:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),s=t.n(l),n=t("JRaF"),r=t("YFqc"),c=t.n(r),m={url:"a-react-js-case-study",id:"getstartedwithreact",title:"A React.js case study",author:"david",tags:["react","case study"],date:"2014-08-28",excerpt:"This post dissects a memory game built with React, focusing on structure and the React way of thinking",type:"post",folder:"/Users/davidwaller/gitreps/mine/blog2/sources/2014-08-28_getstartedwithreact",hasStaticContent:!0,headlines:[{level:3,text:"The game",id:"the-game"},{level:3,text:"The code",id:"the-code"},{level:3,text:"The Game component",id:"the-game-component"},{level:3,text:"The Wordform component",id:"the-wordform-component"},{level:3,text:"The Board component",id:"the-board-component"},{level:3,text:"The Status component",id:"the-status-component"},{level:3,text:"The Tile component",id:"the-tile-component"},{level:3,text:"Wrapping up",id:"wrapping-up"}]};a.default=function(){return s.a.createElement(n.a,{kind:"post",data:m,title:"A React.js case study",summary:"This post dissects a memory game built with React, focusing on structure and the React way of thinking",headlines:[{level:3,text:"The game",id:"the-game"},{level:3,text:"The code",id:"the-code"},{level:3,text:"The Game component",id:"the-game-component"},{level:3,text:"The Wordform component",id:"the-wordform-component"},{level:3,text:"The Board component",id:"the-board-component"},{level:3,text:"The Status component",id:"the-status-component"},{level:3,text:"The Tile component",id:"the-tile-component"},{level:3,text:"Wrapping up",id:"wrapping-up"}],tags:["react","case study"]},s.a.createElement("div",{className:"post","data-postid":"getstartedwithreact"},s.a.createElement("p",null,s.a.createElement("span",{style:{color:"red"}},s.a.createElement("strong",null,"NOTE:")," Some code and conclusions expressed here are not idiomatic React. See the ",s.a.createElement(c.a,{href:"/posts/a-react-js-case-study-follow-up",prefetch:!0},s.a.createElement("a",null,"follow-up post"))," for more details!")),s.a.createElement("h3",{id:"the-game"},"The game"),s.a.createElement("p",null,"The last few days I've been toying with ",s.a.createElement("a",{href:"http://facebook.github.io/react/"},"React.js"),", Facebook's excellent view abstraction library. In order to grokk it I built a simple memory game, which we'll dissect in this post."),s.a.createElement("p",null,"First off, here's the game running in a iframe (here's a ",s.a.createElement("a",{href:"https://blog.krawaller.se/reactexperiment/"},"link")," if you want it in a separate tab). The repo can be found ",s.a.createElement("a",{href:"https://github.com/krawaller/reactexperiment/"},"here"),"."),s.a.createElement("iframe",{src:"https://blog.krawaller.se/reactexperiment/",style:{height:240,width:"100%"}}),s.a.createElement("p",null,"As you can see the game is rather simple, yet included enough state and compositions to force me to actually use React."),s.a.createElement("h3",{id:"the-code"},"The code"),s.a.createElement("p",null,"This is the full contents of the repo:"),s.a.createElement("img",{src:"/static/posts/a-react-js-case-study/img/reactexperimentsource.png",style:{marginLeft:"4em"}}),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"lib")," folder contains the only 3 dependencies:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"react.js")," is the react librabry itself. We don't need the add-on version, just plain vanilla React."),s.a.createElement("li",null,s.a.createElement("code",null,"JSXTransformer.js")," translates the JSX syntax. In production this should of course be part of the build process."),s.a.createElement("li",null,s.a.createElement("code",null,"lodash.js")," is used merely to make for some cleaner code in the game logic.")),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"src")," folder then contains files for all of our React components. The hierarchy looks like thus:"),s.a.createElement("img",{src:"/static/posts/a-react-js-case-study/img/reactexperiment.png",style:{height:200,marginLeft:"4em"}}),s.a.createElement("p",null,"Finally ",s.a.createElement("code",null,"index.html")," is a super simple bootstrap kicking it all off:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-html"},s.a.createElement("span",{className:"hljs-meta"},"<!DOCTYPE ",s.a.createElement("span",{className:"hljs-meta-keyword"},"html"),">"),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"html"),">"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"head"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/javascript"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"lib/lodash.js"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/javascript"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"lib/react.js"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/javascript"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"lib/JSXTransformer.js"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"src/status.jsx"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"src/board.jsx"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"src/game.jsx"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"src/wordform.jsx"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"')," ",s.a.createElement("span",{className:"hljs-attr"},"src"),"=",s.a.createElement("span",{className:"hljs-string"},'"src/tile.jsx"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"link")," ",s.a.createElement("span",{className:"hljs-attr"},"rel"),"=",s.a.createElement("span",{className:"hljs-string"},'"stylesheet"')," ",s.a.createElement("span",{className:"hljs-attr"},"href"),"=",s.a.createElement("span",{className:"hljs-string"},'"styles.css"')," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/css"'),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"link"),">"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"head"),">"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"body"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"script")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text/jsx"'),">"),s.a.createElement("span",{className:"javascript"},s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),"      React.renderComponent(",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Game")," />")),",",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"document"),".querySelector(",s.a.createElement("span",{className:"hljs-string"},'"body"'),")",s.a.createElement("br",null),"      );",s.a.createElement("br",null),"    "),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"script"),">"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"body"),">"),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"html"),">"))),s.a.createElement("p",null,"We'll now walk through each of the five React components, and how they map to the fundamental React principle; initial data that won't change should be passed to a component as a property, while changing data should be handle in a component's ",s.a.createElement("code",null,"state"),". If we need to communicate from a child to a parent, we do this by calling a callback that was passed to the child as a property."),s.a.createElement("h3",{id:"the-game-component"},"The Game component"),s.a.createElement("p",null,"First off is the Game component. It is responsible for switching between the form and the board, and passing data from the form to the board."),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-keyword"},"var")," Game = React.createClass({",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"getInitialState"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," { ",s.a.createElement("span",{className:"hljs-attr"},"playing"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),", ",s.a.createElement("span",{className:"hljs-attr"},"tiles"),": [] };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"startGame"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"words"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"tiles"),": _.shuffle(words.concat(words)),",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"playing"),": ",s.a.createElement("span",{className:"hljs-literal"},"true"),",",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"seed"),": ",s.a.createElement("span",{className:"hljs-built_in"},"Math"),".random()",s.a.createElement("br",null),"    });",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"endGame"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"playing"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," });",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"render"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.playing"),' ? "',s.a.createElement("span",{className:"hljs-attr"},"hidden"),'" ',s.a.createElement("span",{className:"hljs-attr"},":"),' "',s.a.createElement("span",{className:"hljs-attr"},"showing"),'"}>'),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Wordform")," ",s.a.createElement("span",{className:"hljs-attr"},"startGame"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.startGame}")," />"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.playing"),' ? "',s.a.createElement("span",{className:"hljs-attr"},"showing"),'" ',s.a.createElement("span",{className:"hljs-attr"},":"),' "',s.a.createElement("span",{className:"hljs-attr"},"hidden"),'"}>'),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Board"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"endGame"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.endGame}"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"tiles"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.tiles}"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"key"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.seed}"),s.a.createElement("br",null),"          />"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">")),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"});")),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Props"),s.a.createElement("th",null,"State"),s.a.createElement("th",null,"Sub components"),s.a.createElement("th",null,"Instance variables"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null),s.a.createElement("td",null,"playing",s.a.createElement("br",null),"tiles"),s.a.createElement("td",null,"Wordform",s.a.createElement("br",null),"Board"),s.a.createElement("td",null)))),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"Game")," component has two ",s.a.createElement("code",null,"state")," variables:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"playing")," which controls which sub component to show or hide."),s.a.createElement("li",null,s.a.createElement("code",null,"tiles")," which contain the words passed to ",s.a.createElement("code",null,"startGame"),", which will be triggered inside ",s.a.createElement("code",null,"Wordform"),".")),s.a.createElement("p",null,s.a.createElement("code",null,"Game")," has two sub components:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"Wordform"),", which it passes the ",s.a.createElement("code",null,"startGame")," method."),s.a.createElement("li",null,s.a.createElement("code",null,"Board"),", which is passed the ",s.a.createElement("code",null,"endGame")," method and the ",s.a.createElement("code",null,"tiles"),".")),s.a.createElement("p",null,"Note that ",s.a.createElement("code",null,"Game")," always renders both the ",s.a.createElement("code",null,"Board")," and the ",s.a.createElement("code",null,"Wordform"),". This has to do with React component lifecycles. I first tried to do this:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs"},s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"  <div>{",s.a.createElement("span",{className:"hljs-keyword"},"this"),".state.playing ? <Board endGame={",s.a.createElement("span",{className:"hljs-keyword"},"this"),".endGame} tiles={",s.a.createElement("span",{className:"hljs-keyword"},"this"),".state.tiles}/> : <Wordform startGame={",s.a.createElement("span",{className:"hljs-keyword"},"this"),".startGame} />}</div>",s.a.createElement("br",null),");")),s.a.createElement("p",null,"...which actually worked, but generated a React error message about an unmounted component. The official docs also state that instead of generating different components, we should generate them all and show/hide them as needed."),s.a.createElement("p",null,"Also related to the life cycle of a component is the ",s.a.createElement("code",null,"key")," property of the ",s.a.createElement("code",null,"Board"),". Changing ",s.a.createElement("code",null,"key")," ensures we have a new ",s.a.createElement("code",null,"Board")," instance whenever we enter new words in the form, otherwise React will just repopulate the existing ",s.a.createElement("code",null,"Board")," with new words. That means that previously flipped tiles will still be flipped, even though they now contain new words. Remove the ",s.a.createElement("code",null,"key")," property and try it!"),s.a.createElement("h3",{id:"the-wordform-component"},"The Wordform component"),s.a.createElement("p",null,"This component displays a form for entering words to be used as tiles."),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-keyword"},"var")," Wordform = React.createClass({",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"getInitialState"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," { ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-string"},'""')," };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"setError"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"msg"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"error"),": msg });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"setTimeout"),"(",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-string"},'""')," });",s.a.createElement("br",null),"      }.bind(",s.a.createElement("span",{className:"hljs-built_in"},"this"),"),",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-number"},"2000"),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"submitWords"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"e"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," node = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".refs[",s.a.createElement("span",{className:"hljs-string"},'"wordfield"'),"].getDOMNode(),",s.a.createElement("br",null),"      words = (node.value || ",s.a.createElement("span",{className:"hljs-string"},'""'),")",s.a.createElement("br",null),"        .trim()",s.a.createElement("br",null),"        .replace(",s.a.createElement("span",{className:"hljs-regexp"},"/\\W+/g"),", ",s.a.createElement("span",{className:"hljs-string"},'" "'),")",s.a.createElement("br",null),"        .split(",s.a.createElement("span",{className:"hljs-string"},'" "'),");",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (words.length <= ",s.a.createElement("span",{className:"hljs-number"},"2"),") {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setError(",s.a.createElement("span",{className:"hljs-string"},'"Enter at least 3 words!"'),");",s.a.createElement("br",null),"    } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (words.length !== _.unique(words).length) {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setError(",s.a.createElement("span",{className:"hljs-string"},'"Words should be unique!"'),");",s.a.createElement("br",null),"    } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (",s.a.createElement("br",null),"      _.filter(words, ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"w"),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"return")," w.length > ",s.a.createElement("span",{className:"hljs-number"},"8"),";",s.a.createElement("br",null),"      }).length",s.a.createElement("br",null),"    ) {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setError(",s.a.createElement("span",{className:"hljs-string"},'"Words should not be longer than 8 characters!"'),");",s.a.createElement("br",null),"    } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props.startGame(words);",s.a.createElement("br",null),"      node.value = ",s.a.createElement("span",{className:"hljs-string"},'""'),";",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-literal"},"false"),";",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"render"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"form")," ",s.a.createElement("span",{className:"hljs-attr"},"onSubmit"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.submitWords}"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"p"),">"),"Enter words separated by spaces!",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"p"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"input")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"text"')," ",s.a.createElement("span",{className:"hljs-attr"},"ref"),"=",s.a.createElement("span",{className:"hljs-string"},'"wordfield"')," />"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"submit"'),">"),"Start!",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"p")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"error"')," ",s.a.createElement("span",{className:"hljs-attr"},"ref"),"=",s.a.createElement("span",{className:"hljs-string"},'"errormsg"'),">"),s.a.createElement("br",null),"          {this.state.error}",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"p"),">"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"form"),">")),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"});")),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Props"),s.a.createElement("th",null,"State"),s.a.createElement("th",null,"Sub components"),s.a.createElement("th",null,"Instance variables"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"startGame()"),s.a.createElement("td",null,"error"),s.a.createElement("td",null),s.a.createElement("td",null)))),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"Wordform")," component validates the input and passes it back up to ",s.a.createElement("code",null,"Game")," by calling the ",s.a.createElement("code",null,"startGame")," method which it received as a property."),s.a.createElement("p",null,"In order to collect the contents of the input field we use the ",s.a.createElement("code",null,"refs")," instance property, with the same key (",s.a.createElement("code",null,"wordfield"),") as given to the ",s.a.createElement("code",null,"ref")," property of the corresponding node in the render output."),s.a.createElement("p",null,"Note how showing and hiding error messages are done through changing the ",s.a.createElement("code",null,"error")," state variable, which triggers the rerender. It feels almost like we have a two-way data binding!"),s.a.createElement("h3",{id:"the-board-component"},"The Board component"),s.a.createElement("p",null,"Here's the code for the ",s.a.createElement("code",null,"Board")," component, which displays the game board:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-keyword"},"var")," Board = React.createClass({",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"getInitialState"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," { ",s.a.createElement("span",{className:"hljs-attr"},"found"),": ",s.a.createElement("span",{className:"hljs-number"},"0"),", ",s.a.createElement("span",{className:"hljs-attr"},"message"),": ",s.a.createElement("span",{className:"hljs-string"},'"choosetile"')," };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"clickedTile"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"tile"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (!",s.a.createElement("span",{className:"hljs-built_in"},"this"),".wait) {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-comment"},"// turn up lone tile"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (!",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile) {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile = tile;",s.a.createElement("br",null),"        tile.reveal();",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"message"),": ",s.a.createElement("span",{className:"hljs-string"},'"findmate"')," });",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-comment"},"// clicked second"),s.a.createElement("br",null),"      } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".wait = ",s.a.createElement("span",{className:"hljs-literal"},"true"),";",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile.props.word === tile.props.word) {",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"found"),": ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".state.found + ",s.a.createElement("span",{className:"hljs-number"},"1"),", ",s.a.createElement("span",{className:"hljs-attr"},"message"),": ",s.a.createElement("span",{className:"hljs-string"},'"foundmate"')," });",s.a.createElement("br",null),"          tile.succeed();",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile.succeed();",s.a.createElement("br",null),"        } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"message"),": ",s.a.createElement("span",{className:"hljs-string"},'"wrong"')," });",s.a.createElement("br",null),"          tile.fail();",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile.fail();",s.a.createElement("br",null),"        }",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"setTimeout"),"(",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".wait = ",s.a.createElement("span",{className:"hljs-literal"},"false"),";",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"message"),": ",s.a.createElement("span",{className:"hljs-string"},'"choosetile"')," });",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-keyword"},"delete")," ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".flippedtile;",s.a.createElement("br",null),"          }.bind(",s.a.createElement("span",{className:"hljs-built_in"},"this"),"),",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-number"},"2000"),s.a.createElement("br",null),"        );",s.a.createElement("br",null),"      }",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"render"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," tiles = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props.tiles.map(",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"b, n"),") "),"{",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Tile")," ",s.a.createElement("span",{className:"hljs-attr"},"word"),"=",s.a.createElement("span",{className:"hljs-string"},"{b}")," ",s.a.createElement("span",{className:"hljs-attr"},"key"),"=",s.a.createElement("span",{className:"hljs-string"},"{n}")," ",s.a.createElement("span",{className:"hljs-attr"},"clickedTile"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.clickedTile}")," />")),";",s.a.createElement("br",null),"    }, ",s.a.createElement("span",{className:"hljs-built_in"},"this"),");",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.props.endGame}"),">"),"End game",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Status"),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"found"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.found}"),s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"max"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.props.tiles.length")," / ",s.a.createElement("span",{className:"hljs-attr"},"2"),"}",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"message"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.state.message}"),s.a.createElement("br",null),"        />"),s.a.createElement("br",null),"        {tiles}",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">")),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"});")),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Props"),s.a.createElement("th",null,"State"),s.a.createElement("th",null,"Sub components"),s.a.createElement("th",null,"Instance variables"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"tiles",s.a.createElement("br",null),"endGame()"),s.a.createElement("td",null,"found",s.a.createElement("br",null),"message"),s.a.createElement("td",null,"Status",s.a.createElement("br",null),"Tile"),s.a.createElement("td",null,"wait",s.a.createElement("br",null),"flippedtile")))),s.a.createElement("p",null,"The Board component was passed a ",s.a.createElement("code",null,"tiles")," array and an ",s.a.createElement("code",null,"endGame")," callback from its parent."),s.a.createElement("p",null,"It has two state variables:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"found")," which counts how many pairs the player has found"),s.a.createElement("li",null,s.a.createElement("code",null,"message")," which contains the id of the message to display to the player")),s.a.createElement("p",null,"When rendered it contains two different sub components:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"Status"),", which is passed ",s.a.createElement("code",null,"found"),", ",s.a.createElement("code",null,"max")," and ",s.a.createElement("code",null,"message"),". This component deals with the instruction to the player above the tiles."),s.a.createElement("li",null,s.a.createElement("code",null,"Tile"),", which represents an individual tile. Each tile is passed a ",s.a.createElement("code",null,"word")," and the ",s.a.createElement("code",null,"clickedTile")," callback.")),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"clickedTile")," callback will be called from the individual tiles, with the tile instance as parameter. As you can see, this method contains the full logic for the actual game."),s.a.createElement("p",null,"Note how this method uses the instance variables ",s.a.createElement("code",null,"this.wait")," and ",s.a.createElement("code",null,"this.flippedtile"),". These do NOT need to be ",s.a.createElement("code",null,"state")," variables, as they don't affect the rendering! Only state which might affect what the component looks like need to be stored using ",s.a.createElement("code",null,"this.setState"),"."),s.a.createElement("h3",{id:"the-status-component"},"The Status component"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),"This component renders the info row above the game board.",s.a.createElement("br",null),s.a.createElement("br",null),"var Status = React.createClass({",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"render"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," found = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props.found,",s.a.createElement("br",null),"        max = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props.max,",s.a.createElement("br",null),"        texts = {",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"choosetile"),":",s.a.createElement("span",{className:"hljs-string"},'"Choose a tile!"'),",",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"findmate"),":",s.a.createElement("span",{className:"hljs-string"},'"Now try to find the matching tile!"'),",",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"wrong"),":",s.a.createElement("span",{className:"hljs-string"},'"Sorry, those didn\'t match!"'),",",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"foundmate"),":",s.a.createElement("span",{className:"hljs-string"},'"Yey, they matched!"'),",",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-attr"},"foundall"),":",s.a.createElement("span",{className:"hljs-string"},'"You\'ve found all "'),"+max+",s.a.createElement("span",{className:"hljs-string"},'" pairs! Well done!"'),s.a.createElement("br",null),"        };",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"p"),">"),"({found}/{max})",s.a.createElement("span",{className:"hljs-symbol"},"&nbsp;"),s.a.createElement("span",{className:"hljs-symbol"},"&nbsp;"),'{texts[this.props.message === "choosetile" && found === max ? "foundall" : this.props.message]}',s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"p"),">")),";",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"});")),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Props"),s.a.createElement("th",null,"State"),s.a.createElement("th",null,"Sub components"),s.a.createElement("th",null,"Instance variables"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"found",s.a.createElement("br",null),"max",s.a.createElement("br",null),"message"),s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)))),s.a.createElement("p",null,"The ",s.a.createElement("code",null,"Status")," component was passed ",s.a.createElement("code",null,"found"),", ",s.a.createElement("code",null,"max")," and ",s.a.createElement("code",null,"message")," from its parent. It then bakes this together into a UI info row."),s.a.createElement("p",null,"Note how even though the status row is constantly changing while playing, this is a totally static component. It contains no state variables, and all updates are controlled in the parent!"),s.a.createElement("h3",{id:"the-tile-component"},"The Tile component"),s.a.createElement("p",null,"This component represents an individual tile."),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-comment"},"/** ",s.a.createElement("span",{className:"hljs-doctag"},"@jsx "),"React.DOM */"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-keyword"},"var")," Tile = React.createClass({",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"getInitialState"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," { ",s.a.createElement("span",{className:"hljs-attr"},"flipped"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"catchClick"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (!",s.a.createElement("span",{className:"hljs-built_in"},"this"),".state.flipped) {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props.clickedTile(",s.a.createElement("span",{className:"hljs-built_in"},"this"),");",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"reveal"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"flipped"),": ",s.a.createElement("span",{className:"hljs-literal"},"true")," });",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"fail"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"flipped"),": ",s.a.createElement("span",{className:"hljs-literal"},"true"),", ",s.a.createElement("span",{className:"hljs-attr"},"wrong"),": ",s.a.createElement("span",{className:"hljs-literal"},"true")," });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"setTimeout"),"(",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"flipped"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),", ",s.a.createElement("span",{className:"hljs-attr"},"wrong"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," });",s.a.createElement("br",null),"      }.bind(",s.a.createElement("span",{className:"hljs-built_in"},"this"),"),",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-number"},"2000"),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"succeed"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".setState({ ",s.a.createElement("span",{className:"hljs-attr"},"flipped"),": ",s.a.createElement("span",{className:"hljs-literal"},"true"),", ",s.a.createElement("span",{className:"hljs-attr"},"correct"),": ",s.a.createElement("span",{className:"hljs-literal"},"true")," });",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"render"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," classes = _.reduce(",s.a.createElement("br",null),"      [",s.a.createElement("span",{className:"hljs-string"},'"flipped"'),", ",s.a.createElement("span",{className:"hljs-string"},'"correct"'),", ",s.a.createElement("span",{className:"hljs-string"},'"wrong"'),"],",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"m, c"),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"return")," m + (",s.a.createElement("span",{className:"hljs-built_in"},"this"),".state[c] ? c + ",s.a.createElement("span",{className:"hljs-string"},'" "')," : ",s.a.createElement("span",{className:"hljs-string"},'""'),");",s.a.createElement("br",null),"      },",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-string"},'""'),",",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-built_in"},"this"),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},"{"),'"',s.a.createElement("span",{className:"hljs-attr"},"brick"),' " + (',s.a.createElement("span",{className:"hljs-attr"},"classes"),' || "")} ',s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.catchClick}"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"front"'),">"),"?",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"back"'),">"),"{this.props.word}",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">"),s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">")),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"});")),s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Props"),s.a.createElement("th",null,"State"),s.a.createElement("th",null,"Sub components"),s.a.createElement("th",null,"Instance variables"))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"word",s.a.createElement("br",null),"clickedTile()"),s.a.createElement("td",null,"flipped",s.a.createElement("br",null),"wrong",s.a.createElement("br",null),"correct"),s.a.createElement("td",null),s.a.createElement("td",null)))),s.a.createElement("p",null,"It was passed two properties from the parent; a ",s.a.createElement("code",null,"word")," variable and a ",s.a.createElement("code",null,"clickedTile")," callback."),s.a.createElement("p",null,"The component has three ",s.a.createElement("code",null,"state")," variables:"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("code",null,"flipped")," is a flag to show if the tile has been flipped up or not. While flipped it will not receive clicks."),s.a.createElement("li",null,s.a.createElement("code",null,"wrong")," is true if the tile was part of a failed match attempt."),s.a.createElement("li",null,s.a.createElement("code",null,"correct")," is true if the tile has been matched to a partner.")),s.a.createElement("p",null,"When clicked the component will call the ",s.a.createElement("code",null,"clickedTile")," callback passing itself as a parameter. All game logic is in ",s.a.createElement("code",null,"Board"),", as we saw previously."),s.a.createElement("h3",{id:"wrapping-up"},"Wrapping up"),s.a.createElement("p",null,"I'm totally in love with React! It took a while to grasp the thinking, like for example the differentiation between ",s.a.createElement("code",null,"state")," and ",s.a.createElement("code",null,"props"),", and how ",s.a.createElement("code",null,"state")," can belong in ",s.a.createElement("code",null,"props")," when passed to a child. But when that mentality was in place, putting it all together was a breeze. I really appreciate not having to write any update or cleanup code (I'm looking at you, Backbone), delegating all that headache to React!"),s.a.createElement("p",null,"Passing callbacks to allow for upstream communication can feel a bit clunky, and I look forward to trying out the Flux approach instead. I also want to integrate a Router, and see how that plays along with it all."),s.a.createElement("p",null,s.a.createElement("span",{style:{color:"red"}},s.a.createElement("strong",null,"NOTE:")," If you haven't already, check out the ",s.a.createElement(c.a,{href:"/posts/a-react-js-case-study-follow-up",prefetch:!0},s.a.createElement("a",null,"follow-up post"))," for a detailed refactoring of the code to be more idiomatic to React!"))),s.a.createElement("hr",null))}}},[["4lHg",1,0]]]);