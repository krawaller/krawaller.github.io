(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+EbC":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/a-redux-app-tutorial",function(){var e=t("M05l");return{page:e.default||e}}])},M05l:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),n=t.n(l),s=t("JRaF"),r=t("YFqc"),c=t.n(r),m={url:"a-redux-app-tutorial",id:"reduxexamplewalkthrough",type:"post",title:"A Redux app tutorial",date:"2016-03-14",tags:["redux","case study"],author:"david",excerpt:"Grokking Redux thinking by walking through a minimal app example",draft:!1,folder:"/Users/davidwaller/gitreps/mine/blog2/sources/2016-03-14_reduxexamplewalkthrough",hasStaticContent:!0,headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"Our map",id:"our-map"},{level:3,text:"App idea",id:"app-idea"},{level:3,text:"State shape",id:"state-shape"},{level:3,text:"Initial state",id:"initial-state"},{level:3,text:"Action shapes",id:"action-shapes"},{level:3,text:"Reducer",id:"reducer"},{level:3,text:"Store",id:"store"},{level:3,text:"Action creators",id:"action-creators"},{level:3,text:"UI",id:"ui"},{level:3,text:"UI updater function",id:"ui-updater-function"},{level:3,text:"Interaction",id:"interaction"},{level:3,text:"Application",id:"application"},{level:3,text:"The Redux cycle",id:"the-redux-cycle"},{level:3,text:"Wrapping up",id:"wrapping-up"}]};a.default=function(){return n.a.createElement(s.a,{kind:"post",data:m,title:"A Redux app tutorial",summary:"Grokking Redux thinking by walking through a minimal app example",headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"Our map",id:"our-map"},{level:3,text:"App idea",id:"app-idea"},{level:3,text:"State shape",id:"state-shape"},{level:3,text:"Initial state",id:"initial-state"},{level:3,text:"Action shapes",id:"action-shapes"},{level:3,text:"Reducer",id:"reducer"},{level:3,text:"Store",id:"store"},{level:3,text:"Action creators",id:"action-creators"},{level:3,text:"UI",id:"ui"},{level:3,text:"UI updater function",id:"ui-updater-function"},{level:3,text:"Interaction",id:"interaction"},{level:3,text:"Application",id:"application"},{level:3,text:"The Redux cycle",id:"the-redux-cycle"},{level:3,text:"Wrapping up",id:"wrapping-up"}],tags:["redux","case study"]},n.a.createElement("div",{className:"post","data-postid":"reduxexamplewalkthrough"},n.a.createElement("h3",{id:"the-premise"},"The premise"),n.a.createElement("p",null,"We recently published a post that ",n.a.createElement(c.a,{href:"/posts/exploring-redux-middleware",prefetch:!0},n.a.createElement("a",null,"explored Redux middleware")),", based on Dan Abramov's ",n.a.createElement("a",{href:"https://twitter.com/dan_abramov/status/664135757297295360"},"minimal Redux example"),". During the conversations following that post it became evident that however minimal the example is, there's room for an explanation of the how and why behind it. Which is exactly what this post provides - a ",n.a.createElement("strong",null,"walkthrough of a basic Redux example"),"!"),n.a.createElement("p",null,"We'll be picking apart a super simple Redux app, only slightly bigger in scope than Dan's example. Like in his example there'll be no external dependencies - this will be a pure Redux experience."),n.a.createElement("h3",{id:"our-map"},"Our map"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map.png",alt:"Map"})),n.a.createElement("p",null,"This is the journey we'll make throughout this post. It might look complicated, but don't fret - this isn't a map of the code but of ",n.a.createElement("strong",null,"everything"),", that is, the involved ",n.a.createElement("em",null,"ideas")," and ",n.a.createElement("em",null,"concepts")," as well as the code."),n.a.createElement("p",null,"From here on, ",n.a.createElement("strong",null,"each headline will correspond to a concept bubble")," in the above map. For each concept we'll repeat a slice of the map showing the concepts that the current concept builds on, and what concepts it in turn is building up to."),n.a.createElement("h3",{id:"app-idea"},"App idea"),n.a.createElement("p",null,"Before we can do anything, we need to have an ",n.a.createElement("strong",null,"app idea")," so we know what we're going to create! This will allow us to figure out a ",n.a.createElement("strong",null,"UI"),", the ",n.a.createElement("strong",null,"action shapes")," and ",n.a.createElement("strong",null,"state shape"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-appidea.png",alt:"Map"})),n.a.createElement("p",null,"Let's make a simple ",n.a.createElement("strong",null,"counter")," app. The counter increases whenever the user clicks a ",n.a.createElement("strong",null,"button"),", by an amount controlled by an ",n.a.createElement("strong",null,"input"),". It should look something like this:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-screen.png",alt:"Map"})),n.a.createElement("p",null,"Essentially the same app that Dan built in his minimal example, except here we can increase by any amount and not just 1."),n.a.createElement("h3",{id:"state-shape"},"State shape"),n.a.createElement("p",null,"Now that we have an ",n.a.createElement("strong",null,"app idea"),", let's decide on the ",n.a.createElement("strong",null,"state shape"),". That will in turn let us figure out what our ",n.a.createElement("strong",null,"initial state")," should be, as well as define our ",n.a.createElement("strong",null,"reducer"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-stateshape.png",alt:"State shape"})),n.a.createElement("p",null,"In Redux, all the app state is contained in one single ",n.a.createElement("strong",null,"object"),"."),n.a.createElement("p",null,"However, in our simple counter app, we only need to track one single thing - the current count. Thus our state can be a ",n.a.createElement("strong",null,"single number"),"."),n.a.createElement("h3",{id:"initial-state"},"Initial state"),n.a.createElement("p",null,"Having decided on a ",n.a.createElement("strong",null,"state shape"),", however simple, we can now define an ",n.a.createElement("strong",null,"initial state"),". We'll need this to code our ",n.a.createElement("strong",null,"store"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-initialstate.png",alt:"Initial state"})),n.a.createElement("p",null,"For our little app that only entails one single decision - at what number should we start the count? Let's go with 0!"),n.a.createElement("p",null,"This also lets us write our first line of code:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs"},n.a.createElement("span",{className:"hljs-attribute"},"var initialstate")," = 0;")),n.a.createElement("h3",{id:"action-shapes"},"Action shapes"),n.a.createElement("p",null,"Let's design the ",n.a.createElement("strong",null,"actions")," needed for our ",n.a.createElement("strong",null,"app idea"),"! We need them in order to make ",n.a.createElement("strong",null,"action creators")," and code the ",n.a.createElement("strong",null,"reducer"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-actions.png",alt:"Action shapes"})),n.a.createElement("p",null,"In our app only one single thing can happen - ",n.a.createElement("strong",null,"incrementing")," the counter. Let's decide that the ",n.a.createElement("strong",null,"action")," describing this event looks like this:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-json"},"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},'"type"'),": ",n.a.createElement("span",{className:"hljs-string"},'"INCREMENT"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},'"by"'),": ",n.a.createElement("span",{className:"hljs-number"},"3"),n.a.createElement("br",null),"}")),n.a.createElement("p",null,"In Redux all actions are described by ",n.a.createElement("strong",null,"objects")," with a mandatory ",n.a.createElement("code",null,"type")," property, and eventual further data payload props. In our case just ",n.a.createElement("code",null,"by"),"."),n.a.createElement("div",{className:"smallnote"},"Note: Normally we would isolate all string constants such as ",n.a.createElement("code",null,'"INCREMENT"')," to a separate file, but in this simple example we'll live with having a single magic string like this."),n.a.createElement("h3",{id:"reducer"},"Reducer"),n.a.createElement("p",null,"Now that we have designed the ",n.a.createElement("strong",null,"action shapes")," and the ",n.a.createElement("strong",null,"state shape")," we can move on to define our ",n.a.createElement("strong",null,"reducer"),"! With the reducer we'll be able to instantiate a ",n.a.createElement("strong",null,"store"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-reducer.png",alt:"Reducer"})),n.a.createElement("p",null,"Remember: a ",n.a.createElement("strong",null,"reducer")," in Redux lingo is simply a function that takes the current state and an action, and returns a new state:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-reducer.png",alt:"Reducer"})),n.a.createElement("p",null,"The reducer in our app just needs to deal with a single action, namely ",n.a.createElement("code",null,"INCREMENT"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"var")," reducer = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"},"state, action"),") "),"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"switch")," (action.type) {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},'"INCREMENT"'),":",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"return")," state + action.by;",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"default"),":",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"return")," state;",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"};")),n.a.createElement("p",null,"When the ",n.a.createElement("code",null,"INCREMENT")," action happens we create a new state by adding ",n.a.createElement("code",null,"action.by")," to the current state."),n.a.createElement("div",{className:"smallnote"},"Remember that we must ",n.a.createElement("strong",null,"always")," have a default case returning the current state, to deal with internal Redux startup actions."),n.a.createElement("div",{className:"smallnote"},"Since our reducer deals with just a single action it would be better phrased as an ",n.a.createElement("code",null,"if-else"),". We only used a ",n.a.createElement("code",null,"switch")," because that's what a reducer normally looks like."),n.a.createElement("div",{className:"smallnote"},"For more complex app we would write subreducers that each worked on parts of the state, and then combine them into one single reducer."),n.a.createElement("h3",{id:"store"},"Store"),n.a.createElement("p",null,"With the ",n.a.createElement("strong",null,"initial state")," and ",n.a.createElement("strong",null,"reducer")," in place, we can now create a ",n.a.createElement("strong",null,"store")," for our app state! That will let us code ",n.a.createElement("strong",null,"interaction")," for our ",n.a.createElement("strong",null,"app"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-store.png",alt:"Store"})),n.a.createElement("p",null,"A store is instantiated using ",n.a.createElement("code",null,"Redux.createStore"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"var")," store = Redux.createStore(reducer, initialstate);")),n.a.createElement("div",{className:"smallnote"},"We can also pass in an ",n.a.createElement("strong",null,"enhancer")," to ",n.a.createElement("code",null,"createStore"),", commonly ",n.a.createElement("strong",null,"middlewares"),", but we don't need that here."),n.a.createElement("div",{className:"smallnote"},"An alternative to providing an ",n.a.createElement("code",null,"initialstate")," on store creation is to have a default return value inside the reducer."),n.a.createElement("h3",{id:"action-creators"},"Action creators"),n.a.createElement("p",null,"Knowing the shape of the ",n.a.createElement("strong",null,"actions")," lets us define ",n.a.createElement("strong",null,"action creators")," to be consumed by our views to create ",n.a.createElement("strong",null,"interaction"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-actioncreators.png",alt:"action creators"})),n.a.createElement("p",null,"Only one single action creator is needed in our app."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs"},n.a.createElement("span",{className:"hljs-keyword"},"var")," actionCreators = {",n.a.createElement("br",null),"    increment: ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function"),"(",n.a.createElement("span",{className:"hljs-params"},n.a.createElement("span",{className:"hljs-keyword"},"int")),")"),"{",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {type: ",n.a.createElement("span",{className:"hljs-string"},"'INCREMENT'"),", by: ",n.a.createElement("span",{className:"hljs-keyword"},"int"),"};",n.a.createElement("br",null),"    }",n.a.createElement("br",null),"};")),n.a.createElement("p",null,"Note how the action creator returns an action as previously defined."),n.a.createElement("div",{className:"smallnote"},'Action creators are sometimes called "actions", which can cause some confusion as to the difference to actual action objects.'),n.a.createElement("div",{className:"smallnote"},"Action creators aren't strictly needed. Their main point is to provide a place to harbour eventual dispatch logic and save us from having to give our views access to the store."),n.a.createElement("div",{className:"smallnote"},"In order to sanely define asynchronous actions we can use ",n.a.createElement("a",{href:"https://github.com/gaearon/redux-thunk"},"Redux-thunk"),", a middleware which lets us return functions instead of actions from our action creators. We touch on this at the end of our ",n.a.createElement(c.a,{href:"/posts/exploring-redux-middleware",prefetch:!0},n.a.createElement("a",null,"middleware post")),"."),n.a.createElement("h3",{id:"ui"},"UI"),n.a.createElement("p",null,"Let's design the ",n.a.createElement("strong",null,"UI")," needed for our ",n.a.createElement("strong",null,"app idea"),". The next step will be to complete our ",n.a.createElement("strong",null,"app")," by introducing ",n.a.createElement("strong",null,"ui updating"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-ui.png",alt:"UI"})),n.a.createElement("p",null,"To create our UI we translate our mental screenshot..."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-screen.png",alt:"screenshot"})),n.a.createElement("p",null,"...to this ",n.a.createElement("code",null,"html"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"body"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Counter is now at ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"span")," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"num"'),">"),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"span"),">"),".",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"button")," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"incbtn"'),">"),"Increase",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"button"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"span"),">")," by ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"span"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"input")," ",n.a.createElement("span",{className:"hljs-attr"},"type"),"=",n.a.createElement("span",{className:"hljs-string"},'"number"')," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"amount"')," ",n.a.createElement("span",{className:"hljs-attr"},"value"),"=",n.a.createElement("span",{className:"hljs-string"},'"1"')," />"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"body"),">"))),n.a.createElement("h3",{id:"ui-updater-function"},"UI updater function"),n.a.createElement("p",null,"Now that we now the ",n.a.createElement("strong",null,"state shape")," and the ",n.a.createElement("strong",null,"UI"),", we can define a ",n.a.createElement("strong",null,"UI updater")," function for our ",n.a.createElement("strong",null,"app"),"!"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-uiupdate.png",alt:"UI updater"})),n.a.createElement("p",null,"The function updates the ",n.a.createElement("strong",null,"UI")," depending on the current ",n.a.createElement("strong",null,"state"),", which is passed in as an argument:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"var")," updateUI = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"},"state"),") "),"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"var")," element = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"num"'),");",n.a.createElement("br",null),"  element.innerHTML = state;",n.a.createElement("br",null),"};")),n.a.createElement("p",null,"Since our ",n.a.createElement("strong",null,"state")," is just the current count, all we need to do is update the ",n.a.createElement("code",null,"#num")," element with the ",n.a.createElement("code",null,"state"),"."),n.a.createElement("div",{className:"smallnote"},"In a React app this would rather be a ",n.a.createElement("strong",null,"render")," function that defined the whole UI instead of mutating existing DOM."),n.a.createElement("h3",{id:"interaction"},"Interaction"),n.a.createElement("p",null,"Now we can complete our ",n.a.createElement("strong",null,"app")," by introducing ",n.a.createElement("strong",null,"interaction")," through hooking up the ",n.a.createElement("strong",null,"action creators")," to the ",n.a.createElement("strong",null,"UI")," and dispatch the result to the ",n.a.createElement("strong",null,"store"),"!"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-interaction.png",alt:"interaction"})),n.a.createElement("p",null,"We add a click handler to the ",n.a.createElement("strong",null,"button"),", which calls the ",n.a.createElement("strong",null,"action creator")," with the value from the ",n.a.createElement("strong",null,"input"),". The resulting action is passed to the ",n.a.createElement("strong",null,"store"),"."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"var")," button = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"incbtn"'),");",n.a.createElement("br",null),"button.addEventListener(",n.a.createElement("span",{className:"hljs-string"},'"click"'),", ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"}),") "),"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"var")," input = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"amount"'),"),",n.a.createElement("br",null),"    increase = ",n.a.createElement("span",{className:"hljs-built_in"},"parseInt"),"(input.value),",n.a.createElement("br",null),"    action = actionCreators.increment(increase);",n.a.createElement("br",null),"  store.dispatch(action);",n.a.createElement("br",null),"});")),n.a.createElement("div",{className:"smallnote"},"Normally you wouldn't let the views have a store reference like this, instead you'd use some kind of bridge to supply ",n.a.createElement("code",null,"dispatch")," at setup time. In a React app you'd use the ",n.a.createElement("a",{href:"https://github.com/reactjs/react-redux"},"React-Redux")," library which provides exactly such a bridge."),n.a.createElement("h3",{id:"application"},"Application"),n.a.createElement("p",null,"We now have all the pieces we need to finalize our app!"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-example-map-app.png",alt:"app"})),n.a.createElement("p",null,"The only code we need to add is to have ",n.a.createElement("strong",null,"UI updater")," run whenever the ",n.a.createElement("strong",null,"store")," is updated and also run an initial rendering."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},"store.subscribe(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"}),") "),"{",n.a.createElement("br",null),"  updateUI(store.getState());",n.a.createElement("br",null),"});",n.a.createElement("br",null),"updateUI(store.getState());")),n.a.createElement("p",null,"Now our app is fully functional!"),n.a.createElement("p",null,"Here is the entire source code:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-meta"},"<!DOCTYPE ",n.a.createElement("span",{className:"hljs-meta-keyword"},"html"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"html"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"head"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"meta")," ",n.a.createElement("span",{className:"hljs-attr"},"charset"),"=",n.a.createElement("span",{className:"hljs-string"},'"utf-8"')," />"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"title"),">"),"JS Bin",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"title"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"script")," ",n.a.createElement("span",{className:"hljs-attr"},"src"),"=",n.a.createElement("span",{className:"hljs-string"},'"https://npmcdn.com/redux/dist/redux.js"'),">"),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"script"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"head"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"body"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Counter is now at ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"span")," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"num"'),">"),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"span"),">"),".",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"button")," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"incbtn"'),">"),"Increase",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"button"),">"),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"span"),">")," by ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"span"),">"),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"input")," ",n.a.createElement("span",{className:"hljs-attr"},"type"),"=",n.a.createElement("span",{className:"hljs-string"},'"number"')," ",n.a.createElement("span",{className:"hljs-attr"},"id"),"=",n.a.createElement("span",{className:"hljs-string"},'"amount"')," ",n.a.createElement("span",{className:"hljs-attr"},"value"),"=",n.a.createElement("span",{className:"hljs-string"},'"1"')," />"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"script")," ",n.a.createElement("span",{className:"hljs-attr"},"type"),"=",n.a.createElement("span",{className:"hljs-string"},'"text/javascript"'),">"),n.a.createElement("span",{className:"javascript"},n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," initialstate = ",n.a.createElement("span",{className:"hljs-number"},"0"),";",n.a.createElement("br",null),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," reducer = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"},"state, action"),") "),"{",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-keyword"},"switch")," (action.type) {",n.a.createElement("br",null),"          ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},'"INCREMENT"'),":",n.a.createElement("br",null),"            ",n.a.createElement("span",{className:"hljs-keyword"},"return")," state + action.by;",n.a.createElement("br",null),"          ",n.a.createElement("span",{className:"hljs-keyword"},"default"),":",n.a.createElement("br",null),"            ",n.a.createElement("span",{className:"hljs-keyword"},"return")," state;",n.a.createElement("br",null),"        }",n.a.createElement("br",null),"      };",n.a.createElement("br",null),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," store = Redux.createStore(reducer, initialstate);",n.a.createElement("br",null),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," actionCreators = {",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-attr"},"increment"),": ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"},"int"),") "),"{",n.a.createElement("br",null),"          ",n.a.createElement("span",{className:"hljs-keyword"},"return")," { ",n.a.createElement("span",{className:"hljs-attr"},"type"),": ",n.a.createElement("span",{className:"hljs-string"},'"INCREMENT"'),", ",n.a.createElement("span",{className:"hljs-attr"},"by"),": int };",n.a.createElement("br",null),"        },",n.a.createElement("br",null),"      };",n.a.createElement("br",null),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," updateUI = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"},"state, arg2"),") "),"{",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-keyword"},"var")," element = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"num"'),");",n.a.createElement("br",null),"        element.innerHTML = state;",n.a.createElement("br",null),"      };",n.a.createElement("br",null),n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-keyword"},"var")," button = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"incbtn"'),");",n.a.createElement("br",null),"      button.addEventListener(",n.a.createElement("span",{className:"hljs-string"},'"click"'),", ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"}),") "),"{",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-keyword"},"var")," input = ",n.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",n.a.createElement("span",{className:"hljs-string"},'"amount"'),"),",n.a.createElement("br",null),"          increase = ",n.a.createElement("span",{className:"hljs-built_in"},"parseInt"),"(input.value),",n.a.createElement("br",null),"          action = actionCreators.increment(increase);",n.a.createElement("br",null),"        store.dispatch(action);",n.a.createElement("br",null),"      });",n.a.createElement("br",null),n.a.createElement("br",null),"      store.subscribe(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," (",n.a.createElement("span",{className:"hljs-params"}),") "),"{",n.a.createElement("br",null),"        updateUI(store.getState());",n.a.createElement("br",null),"      });",n.a.createElement("br",null),"      updateUI(store.getState());",n.a.createElement("br",null),"    "),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"script"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"body"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"html"),">"))),n.a.createElement("p",null,"And here is the app running in an iframe:"),n.a.createElement("iframe",{src:"/static/posts/a-redux-app-tutorial/applets/reduxminiexample/index.html",height:"100px",width:"100%"}),n.a.createElement("p",null,"For your convenience there's also a JSBin ",n.a.createElement("a",{href:"https://jsbin.com/milini/edit?html,js,output"},"here"),"."),n.a.createElement("h3",{id:"the-redux-cycle"},"The Redux cycle"),n.a.createElement("p",null,"Note how already this minimal example demonstrates the ",n.a.createElement("strong",null,"unidirectional data flow"),":"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/a-redux-app-tutorial/img/redux-flow.png",alt:"cycle"})),n.a.createElement("ol",null,n.a.createElement("li",null,'We click a button in our "component"'),n.a.createElement("li",null,"the component calls an action creator"),n.a.createElement("li",null,"the result is dispatched to the store"),n.a.createElement("li",null,"which uses the reducer to calculate a new state"),n.a.createElement("li",null,"which causes ",n.a.createElement("code",null,"updateUI"),' to update the "component"!')),n.a.createElement("h3",{id:"wrapping-up"},"Wrapping up"),n.a.createElement("p",null,"I realise the danger of this all being Much Ado About Nothing, but I hope that I to some extent was able to convey the Redux way of thinking. It is such a powerful paradigm once you've wrapped your head around it!"),n.a.createElement("div",{className:"smallnote"},"PS: This post is an (adapted) excerpt from a 2-day React+Redux training course that I provide through my employer Edument. So if you're in Scandinavia and hungry for more, ",n.a.createElement("a",{href:"http://edument.se/en/training/webdevelopment/react-js"},"check it out"),"!")),n.a.createElement("hr",null))}}},[["+EbC",1,0]]]);