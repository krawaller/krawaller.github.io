(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"2xhq":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/css-selectors-are-evil-and-js-is-the-solution",function(){var e=t("eFeV");return{page:e.default||e}}])},eFeV:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),n=t.n(l),s=t("JRaF"),r=(t("YFqc"),{url:"css-selectors-are-evil-and-js-is-the-solution",id:"cssinjs1",type:"post",title:"CSS selectors are evil and JS is the solution",date:"2018-01-02",tags:["css","cssinjs","bem","react"],author:"david",excerpt:"A pragmatic demonstration of the drawbacks with CSS selectors, and how inline styles through JS solves these problems",folder:"/Users/davidwaller/gitreps/mine/blog2/sources/2018-01-02_cssinjs1",hasStaticContent:!0,headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"Our example",id:"our-example"},{level:3,text:"Take 0 - inline styles",id:"take-0-inline-styles"},{level:3,text:"Take 1 - stylesheet with selectors",id:"take-1-stylesheet-with-selectors"},{level:3,text:"Unanswerable question 1 - the unknown killer problem",id:"unanswerable-question-1-the-unknown-killer-problem"},{level:3,text:"Unanswerable question 2 - the unknown victim problem",id:"unanswerable-question-2-the-unknown-victim-problem"},{level:3,text:"Take 2 - using the BEM naming convention",id:"take-2-using-the-bem-naming-convention"},{level:3,text:"Take 3 - inline styles in a React component",id:"take-3-inline-styles-in-a-react-component"},{level:3,text:"Take 4 - imported inline styles",id:"take-4-imported-inline-styles"},{level:3,text:"Finding the killer",id:"finding-the-killer"},{level:3,text:"Finding the victim",id:"finding-the-victim"},{level:3,text:"LESS isn't more",id:"less-isnt-more"},{level:3,text:"Wrapping up",id:"wrapping-up"}]});a.default=function(){return n.a.createElement(s.a,{kind:"post",data:r,title:"CSS selectors are evil and JS is the solution",summary:"A pragmatic demonstration of the drawbacks with CSS selectors, and how inline styles through JS solves these problems",headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"Our example",id:"our-example"},{level:3,text:"Take 0 - inline styles",id:"take-0-inline-styles"},{level:3,text:"Take 1 - stylesheet with selectors",id:"take-1-stylesheet-with-selectors"},{level:3,text:"Unanswerable question 1 - the unknown killer problem",id:"unanswerable-question-1-the-unknown-killer-problem"},{level:3,text:"Unanswerable question 2 - the unknown victim problem",id:"unanswerable-question-2-the-unknown-victim-problem"},{level:3,text:"Take 2 - using the BEM naming convention",id:"take-2-using-the-bem-naming-convention"},{level:3,text:"Take 3 - inline styles in a React component",id:"take-3-inline-styles-in-a-react-component"},{level:3,text:"Take 4 - imported inline styles",id:"take-4-imported-inline-styles"},{level:3,text:"Finding the killer",id:"finding-the-killer"},{level:3,text:"Finding the victim",id:"finding-the-victim"},{level:3,text:"LESS isn't more",id:"less-isnt-more"},{level:3,text:"Wrapping up",id:"wrapping-up"}],tags:["css","cssinjs","bem","react"]},n.a.createElement("div",{className:"post","data-postid":"cssinjs1"},n.a.createElement("h3",{id:"the-premise"},"The premise"),n.a.createElement("p",null,"In this blog post we'll demonstrate..."),n.a.createElement("ul",null,n.a.createElement("li",null,"why CSS inherently doesn't scale"),n.a.createElement("li",null,"how BEM is a partial solution"),n.a.createElement("li",null,"how inline styles through JS is a (nearly) full solution")),n.a.createElement("p",null,"Towards the end we'll use React as a vehicle for our example, but the concepts apply equally well to Angular or any other modern JS framework. We won't use any \"CSSinJS library\"."),n.a.createElement("p",null,"A small caveat: according to many, what we're describing in this post isn't strictly CSSinJS, but inline styles via JS. However at this stage the distinction doesn't matter much, so if you came here because you're curious about CSSinJS, by all means read on!"),n.a.createElement("h3",{id:"our-example"},"Our example"),n.a.createElement("p",null,"Imagine we have a complex webapp with lots of styling. We now want to add a new UI concept; an ",n.a.createElement("strong",null,"explanation box"),", meant to be shown inside a bigger context to explain some related concept."),n.a.createElement("p",null,"Here's what it should look like:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/img/cssinjsbox.png",alt:""})),n.a.createElement("p",null,"Disregarding styling, here's the markup:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),"Did you know?",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">"))),n.a.createElement("p",null,"We want to apply these styles to the ",n.a.createElement("strong",null,"explanation box")," ",n.a.createElement("code",null,"div"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-tag"},"border-radius"),": 15",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"padding"),": 10",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"border"),": 2",n.a.createElement("span",{className:"hljs-selector-tag"},"px")," ",n.a.createElement("span",{className:"hljs-selector-tag"},"solid")," ",n.a.createElement("span",{className:"hljs-selector-tag"},"springgreen"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"background-color"),": ",n.a.createElement("span",{className:"hljs-selector-tag"},"moccasin"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"color"),": ",n.a.createElement("span",{className:"hljs-selector-tag"},"magenta"),";")),n.a.createElement("p",null,"And inside the box we want these styles for the ",n.a.createElement("strong",null,"explanation headline")," ",n.a.createElement("code",null,"h2"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-tag"},"font-weight"),": ",n.a.createElement("span",{className:"hljs-selector-tag"},"normal"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"letter-spacing"),": 5",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"padding-left"),": 15",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"font-style"),": ",n.a.createElement("span",{className:"hljs-selector-tag"},"italic"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"font-size"),": 14",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";")),n.a.createElement("p",null,"As an added spice, also imagine these styles being applied to ",n.a.createElement("strong",null,"every ",n.a.createElement("code",null,"h2"))," in our app:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-tag"},"font-family"),": ",n.a.createElement("span",{className:"hljs-selector-tag"},"Verdana"),";",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-tag"},"font-size"),": 16",n.a.createElement("span",{className:"hljs-selector-tag"},"px"),";")),n.a.createElement("p",null,"Now let's start exploring how to add these styles to our markup!"),n.a.createElement("h3",{id:"take-0---inline-styles"},"Take 0 - inline styles"),n.a.createElement("p",null,"The most primitive solution is to simply shove all needed style rules into the ",n.a.createElement("code",null,"style")," prop of every explanation box:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},'"border-radius: 15px; padding: 10px; border: 2px solid springgreen; background-color: moccasin; color: magenta;"'),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},'"font-family: Verdana; font-size: 14px; font-weight: normal; letter-spacing: 5px; padding-left: 15px; font-style: italic;"'),">"),"Did you know?",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">"))),n.a.createElement("p",null,"This is of course a horrible solution since"),n.a.createElement("ul",null,n.a.createElement("li",null,"the HTML becomes super-bloated and unreadable"),n.a.createElement("li",null,"the styles can't be reused"),n.a.createElement("li",null,'we\'d be repeating "theme rules" (like the ',n.a.createElement("code",null,"moccasin")," background color) all over the place")),n.a.createElement("h3",{id:"take-1---stylesheet-with-selectors"},"Take 1 - stylesheet with selectors"),n.a.createElement("p",null,"To counter the above we always put our styles in a separate CSS file, using ",n.a.createElement("strong",null,"selectors")," to direct ",n.a.createElement("strong",null,"where they are applied"),"."),n.a.createElement("p",null,"In order to be able to target explanation boxes we can ",n.a.createElement("strong",null,"introduce a class name")," to the markup:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"class"),"=",n.a.createElement("span",{className:"hljs-string"},'"explanationBox"'),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),"Did you know?",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">"))),n.a.createElement("p",null,"In a separate CSS file we can now ",n.a.createElement("strong",null,"apply the box styles")," like this:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-class"},".explanationBox")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"border-radius"),": ",n.a.createElement("span",{className:"hljs-number"},"15px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"padding"),": ",n.a.createElement("span",{className:"hljs-number"},"10px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"border"),": ",n.a.createElement("span",{className:"hljs-number"},"2px")," solid springgreen;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"background-color"),": moccasin;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"color"),": magenta;",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"We style the ",n.a.createElement("strong",null,"explanation headline")," by using a ",n.a.createElement("strong",null,"child combinator")," in the selector:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-class"},".explanationBox")," > ",n.a.createElement("span",{className:"hljs-selector-tag"},"h2")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-weight"),": normal;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"letter-spacing"),": ",n.a.createElement("span",{className:"hljs-number"},"5px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"padding-left"),": ",n.a.createElement("span",{className:"hljs-number"},"15px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-style"),": italic;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-size"),": ",n.a.createElement("span",{className:"hljs-number"},"14px"),";",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"The ",n.a.createElement("strong",null,"generic ",n.a.createElement("code",null,"h2")," styles")," would get their own selector:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-tag"},"h2")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-family"),": Verdana;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-size"),": ",n.a.createElement("span",{className:"hljs-number"},"16px"),";",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Note that both of these later selectors will have an opinion about the ",n.a.createElement("code",null,"font-size")," of our explanation headline, but since ",n.a.createElement("code",null,".explanationBox > h2")," is more specific than ",n.a.createElement("code",null,"h2"),", the former will win."),n.a.createElement("h3",{id:"unanswerable-question-1---the-unknown-killer-problem"},"Unanswerable question 1 - the unknown killer problem"),n.a.createElement("p",null,"With our styles in a CSS file, we now have the following situation:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/diagrams/cssinjs-selector.svg",alt:""})),n.a.createElement("p",null,"The rule blobs are connected with their respective target elements via ",n.a.createElement("strong",null,"selectors"),". While they work fine for our simple example, they ",n.a.createElement("strong",null,"don't scale well"),". As the app grows it is very easy to end up in a messy situation where we are scared to change both HTML and CSS, in fear of some selector somewhere breaking."),n.a.createElement("p",null,"Even in our small example the main reasons for the unscalability are easy to demonstrate."),n.a.createElement("p",null,"Look again at our HTML..."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"class"),"=",n.a.createElement("span",{className:"hljs-string"},'"explanationBox"'),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),"Did you know?",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">"))),n.a.createElement("p",null,"...and ponder this simple question with regards to the ",n.a.createElement("code",null,"div"),":"),n.a.createElement("blockquote",null,n.a.createElement("p",null,n.a.createElement("em",null,"What styles are applied to this element?"))),n.a.createElement("p",null,"We have no easy way of knowing! The elements are being shot at by CSS selectors somewhere out there in the dark. From this side we have no idea whether any of them are targetting this specific element."),n.a.createElement("p",null,"It is ",n.a.createElement("em",null,"likely")," that there is a selector targetting the ",n.a.createElement("code",null,".explanationBox")," class in a selector somewhere. But because CSS selectors are global we'd have to ",n.a.createElement("em",null,"search ",n.a.createElement("strong",null,"all")," CSS")," in order to know."),n.a.createElement("p",null,"And consider asking the same question about the ",n.a.createElement("code",null,"h2")," - it doesn't have a class, which might imply it is not in the crosshairs, but it is in fact targeted by ",n.a.createElement("em",null,"two")," selectors; ",n.a.createElement("code",null,"h2")," and ",n.a.createElement("code",null,".explanationBox > h2"),"."),n.a.createElement("p",null,"Just by looking at the HTML we ",n.a.createElement("strong",null,"cannot know what styles, if any, are applied to an element"),"."),n.a.createElement("h3",{id:"unanswerable-question-2---the-unknown-victim-problem"},"Unanswerable question 2 - the unknown victim problem"),n.a.createElement("p",null,"We find the reverse of the same problem in the CSS file. Look for example at this part:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-class"},".explanationBox")," > ",n.a.createElement("span",{className:"hljs-selector-tag"},"h2")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-weight"),": normal;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"letter-spacing"),": ",n.a.createElement("span",{className:"hljs-number"},"5px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"padding-left"),": ",n.a.createElement("span",{className:"hljs-number"},"15px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-style"),": italic;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-size"),": ",n.a.createElement("span",{className:"hljs-number"},"14px"),";",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Now imagine trying to answer this question:"),n.a.createElement("blockquote",null,n.a.createElement("p",null,n.a.createElement("em",null,"To which elements are these styles applied?"))),n.a.createElement("p",null,"This is impossible to know. We'd have to search through all our HTML files, or templates in case of a dynamic app. And in a dynamic setting the ",n.a.createElement("code",null,".explanationBox")," element and the contained ",n.a.createElement("code",null,"h2")," might live in completely different places, making it even harder to figure out the answer."),n.a.createElement("p",null,"This makes editing a CSS file really scary. Can we remove this part? If the question above was easy to answer then we could know whether it is safe to remove a certain part, but now we cannot!"),n.a.createElement("h3",{id:"take-2---using-the-bem-naming-convention"},"Take 2 - using the BEM naming convention"),n.a.createElement("p",null,"There has been many attempts to mitigate the mess caused by the inability to answer these two questions. One such attempt is the ",n.a.createElement("a",{href:"https://en.bem.info/"},"BEM naming convention"),", which basically boils down to..."),n.a.createElement("ul",null,n.a.createElement("li",null,"have selectors consist of a single class always"),n.a.createElement("li",null,"name the classes according to a strict convention")),n.a.createElement("p",null,"For our example, the explanation box would be a ",n.a.createElement("strong",null,"Block"),", while the ",n.a.createElement("code",null,"h2")," inside of that would be an ",n.a.createElement("strong",null,"Element")," of that block. This is the ",n.a.createElement("code",null,"B")," and ",n.a.createElement("code",null,"E")," of ",n.a.createElement("code",null,"BEM")," (the ",n.a.createElement("code",null,"M")," stands for modifier but we don't need that here)."),n.a.createElement("p",null,"Using BEM logic our markup would become:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-html"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"class"),"=",n.a.createElement("span",{className:"hljs-string"},'"explanationBox"'),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2")," ",n.a.createElement("span",{className:"hljs-attr"},"class"),"=",n.a.createElement("span",{className:"hljs-string"},'"explanationBox__headline"'),">"),"Did you know?",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">"))),n.a.createElement("p",null,"The CSS would now be:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-css"},n.a.createElement("span",{className:"hljs-selector-tag"},"h2")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-family"),": Verdana;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-size"),": ",n.a.createElement("span",{className:"hljs-number"},"14px"),";",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-class"},".explanationBox")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"border-radius"),": ",n.a.createElement("span",{className:"hljs-number"},"15px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"padding"),": ",n.a.createElement("span",{className:"hljs-number"},"10px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"border"),": ",n.a.createElement("span",{className:"hljs-number"},"2px")," solid springgreen;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"background-color"),": moccasin;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"color"),": magenta;",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-selector-class"},".explanationBox__headline")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-weight"),": normal;",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"letter-spacing"),": ",n.a.createElement("span",{className:"hljs-number"},"5px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"padding-left"),": ",n.a.createElement("span",{className:"hljs-number"},"15px"),";",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attribute"},"font-style"),": italic;",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"It is now slightly more clear what styles are applied where. Both the earlier questions are easier to answer, since we can do a search for the more precise class names."),n.a.createElement("p",null,"But we still have the problem of the generic ",n.a.createElement("code",null,"h2")," selector. Also class names might be dynamically created and/or added to an element, so again, in a dynamic setting it might still be hard to find out exactly what's going on."),n.a.createElement("h3",{id:"take-3---inline-styles-in-a-react-component"},"Take 3 - inline styles in a React component"),n.a.createElement("p",null,"The basic idea in BEM, as well as in OOCSS or any of the other attempts at bringing structure to CSS, is to think in terms of ",n.a.createElement("strong",null,"components"),". All style definitions, as far as possible, should be tied to a certain component."),n.a.createElement("p",null,"This jives very well with modern JS frameworks, who (almost) all have a component-centric architecture. If components are our main abstraction, then it is very easy to make an API to style individual components."),n.a.createElement("p",null,"React (and most of the competition) does this by letting us provide a CSS-like JS object to the ",n.a.createElement("code",null,"style")," prop:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-jsx"},n.a.createElement("span",{className:"hljs-keyword"},"const")," box = {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"borderRadius"),": ",n.a.createElement("span",{className:"hljs-string"},'"15px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"padding"),": ",n.a.createElement("span",{className:"hljs-string"},'"10px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"border"),": ",n.a.createElement("span",{className:"hljs-string"},"'2px solid springgreen'"),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"backgroundColor"),": ",n.a.createElement("span",{className:"hljs-string"},"'moccasin'"),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"color"),": ",n.a.createElement("span",{className:"hljs-string"},"'magenta'"),n.a.createElement("br",null),"};",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," headline = {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"fontFamily"),": ",n.a.createElement("span",{className:"hljs-string"},"'Verdana'"),", ",n.a.createElement("span",{className:"hljs-comment"},"// should live in generic h2 styling, but we're cheating for now"),n.a.createElement("br",null),"  fontWeight: ",n.a.createElement("span",{className:"hljs-string"},'"normal"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"letterSpacing"),": ",n.a.createElement("span",{className:"hljs-string"},'"5px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"paddingLeft"),": ",n.a.createElement("span",{className:"hljs-string"},'"15px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"fontStyle"),": ",n.a.createElement("span",{className:"hljs-string"},'"italic"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"fontSize"),": ",n.a.createElement("span",{className:"hljs-string"},"'14px'"),n.a.createElement("br",null),"};",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-class"},n.a.createElement("span",{className:"hljs-keyword"},"class")," ",n.a.createElement("span",{className:"hljs-title"},"ExplanationBox")," ",n.a.createElement("span",{className:"hljs-keyword"},"extends")," ",n.a.createElement("span",{className:"hljs-title"},"React"),".",n.a.createElement("span",{className:"hljs-title"},"Component")," "),"{",n.a.createElement("br",null),"  render() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"return")," (",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"xml"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},"{box}"),">"),n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},"{headline}"),">"),"{this.props.title}",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"        {this.props.children}",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">")),n.a.createElement("br",null),"    );",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Elsewhere in our React app we can now do this..."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-jsx"},"<ExplanationBox title=",n.a.createElement("span",{className:"hljs-string"},'"Did you know?"'),">",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"xml"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Ozelots hate maccaws!",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">")),n.a.createElement("br",null),n.a.createElement("span",{className:"xml"},n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"ExplanationBox"),">")))),n.a.createElement("p",null,"...and we have our reusable, styled component!"),n.a.createElement("h3",{id:"take-4---imported-inline-styles"},"Take 4 - imported inline styles"),n.a.createElement("p",null,"However, what you just saw was really nothing but a regression to our ",n.a.createElement("code",null,"Take 0")," attempt, where we put all styles inline. Like an ",n.a.createElement("em",null,"animal"),"."),n.a.createElement("p",null,"But we can improve on this super easily, simply by migrating the styles to a separate file! Imagine the following living in a file named ",n.a.createElement("code",null,"styles.js"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},"export const typography = {",n.a.createElement("br",null),"  h2: {",n.a.createElement("br",null),"    fontFamily: 'Verdana',",n.a.createElement("br",null),"    fontSize: '16px'",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"};",n.a.createElement("br",null),n.a.createElement("br",null),"export const explanation = {",n.a.createElement("br",null),"  box: {",n.a.createElement("br",null),'    borderRadius: "15px",',n.a.createElement("br",null),'    padding: "10px",',n.a.createElement("br",null),"    border: '2px solid springgreen',",n.a.createElement("br",null),"    backgroundColor: 'moccasin,",n.a.createElement("br",null),"    color: 'magenta',",n.a.createElement("br",null),"  },",n.a.createElement("br",null),"  headline: {",n.a.createElement("br",null),"    ...typography.h2",n.a.createElement("br",null),'    fontWeight: "normal",',n.a.createElement("br",null),'    letterSpacing: "5px",',n.a.createElement("br",null),'    paddingLeft: "15px",',n.a.createElement("br",null),'    fontStyle: "italic",',n.a.createElement("br",null),"    fontSize: '14px'",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"};")),n.a.createElement("p",null,"Note the handling of the basic ",n.a.createElement("code",null,"h2")," styles!"),n.a.createElement("p",null,"Our React component now becomes this:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-jsx"},n.a.createElement("span",{className:"hljs-keyword"},"import")," {explanation} ",n.a.createElement("span",{className:"hljs-keyword"},"from")," styles;",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-class"},n.a.createElement("span",{className:"hljs-keyword"},"class")," ",n.a.createElement("span",{className:"hljs-title"},"ExplanationBox")," ",n.a.createElement("span",{className:"hljs-keyword"},"extends")," ",n.a.createElement("span",{className:"hljs-title"},"React"),".",n.a.createElement("span",{className:"hljs-title"},"Component")," "),"{",n.a.createElement("br",null),"  render() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"return")," (",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"xml"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"div")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},"{explanation.box}"),">"),n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"h2")," ",n.a.createElement("span",{className:"hljs-attr"},"style"),"=",n.a.createElement("span",{className:"hljs-string"},"{explanation.headline}"),">"),"{this.props.title}",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"h2"),">"),n.a.createElement("br",null),"        {this.props.children}",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">")),n.a.createElement("br",null),"    );",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"We have now sort of reinvented the stylesheet! Except, where before the stylesheet used selectors to fire blindly into the dark..."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/diagrams/cssinjs-selector.svg",alt:""})),n.a.createElement("p",null,"...we now let the components go get exactly the styles they need via ",n.a.createElement("code",null,"import"),"s:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/diagrams/cssinjs-import.svg",alt:""})),n.a.createElement("p",null,"It might not be immediately obvious, but the flipping of this arrow makes a world of difference!"),n.a.createElement("h3",{id:"finding-the-killer"},"Finding the killer"),n.a.createElement("p",null,"Remember the first unanswerable question?"),n.a.createElement("blockquote",null,n.a.createElement("p",null,n.a.createElement("em",null,"What styles are applied to this element?"))),n.a.createElement("p",null,"In our imported inline style setup, this becomes trivial to answer. I simply follow the thread backwards from the style prop!"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/img/cssinjs-findkiller.gif",alt:""})),n.a.createElement("h3",{id:"finding-the-victim"},"Finding the victim"),n.a.createElement("p",null,"Our second unanswerable question was:"),n.a.createElement("blockquote",null,n.a.createElement("p",null,n.a.createElement("em",null,"To which elements are these styles applied?"))),n.a.createElement("p",null,"Again, because of the explicit imports, this becomes very easy to answer (if you have a semi-competent editor):"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/css-selectors-are-evil-and-js-is-the-solution/img/cssinjs-findvictim.gif",alt:""})),n.a.createElement("h3",{id:"less-isnt-more"},"LESS isn't more"),n.a.createElement("p",null,"Through moving our style definitions to JS land, the need for CSS preprocessors goes out the window. Remember how we used the ",n.a.createElement("code",null,"...")," spread operator to mix in the ",n.a.createElement("code",null,"h2")," styles into our headline rules?"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-js"},"headline: {",n.a.createElement("br",null),"  ...typography.h2",n.a.createElement("br",null),"  fontWeight: ",n.a.createElement("span",{className:"hljs-string"},'"normal"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"letterSpacing"),": ",n.a.createElement("span",{className:"hljs-string"},'"5px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"paddingLeft"),": ",n.a.createElement("span",{className:"hljs-string"},'"15px"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"fontStyle"),": ",n.a.createElement("span",{className:"hljs-string"},'"italic"'),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"fontSize"),": ",n.a.createElement("span",{className:"hljs-string"},"'14px'"),n.a.createElement("br",null),"}")),n.a.createElement("p",null,"That was the equivalent of a LESS/SASS mixin! You'll quickly find that the other syntax they give us can be easily replicated with pure JS. For example, having global variables becomes trivial:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-js"},n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-keyword"},"const")," palette = {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"softcolor"),": ",n.a.createElement("span",{className:"hljs-string"},"'moccasin'"),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"hardcolor"),": ",n.a.createElement("span",{className:"hljs-string"},"'magenta'"),",",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"accentuationcolor"),": ",n.a.createElement("span",{className:"hljs-string"},"'springgreen'"),n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-keyword"},"const")," explanationBlock = {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"box"),": {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"borderRadius"),": ",n.a.createElement("span",{className:"hljs-string"},'"15px"'),",",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"padding"),": ",n.a.createElement("span",{className:"hljs-string"},'"10px"'),",",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"border"),": ",n.a.createElement("span",{className:"hljs-string"},"'2px solid '")," + palette.accentuationcolor,",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"backgroundColor"),": palette.softcolor,",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"color"),": palette.hardcolor,",n.a.createElement("br",null),"  },",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...truncated"))),n.a.createElement("p",null,"As do implementing helper functions to add vendor prefixes, saturate colours, etc."),n.a.createElement("h3",{id:"wrapping-up"},"Wrapping up"),n.a.createElement("p",null,"To recap; by turning the arrows around through using JS and inline styles, almost all opaqueness of regular CSS goes away. Previously difficult tasks such as..."),n.a.createElement("ul",null,n.a.createElement("li",null,"renaming a CSS class"),n.a.createElement("li",null,"identifying and removing dead CSS code"),n.a.createElement("li",null,"hitting the correct elements with selectors"),n.a.createElement("li",null,"NOT hitting the wrong elements with selectors")),n.a.createElement("p",null,"...suddenly become easy or entirely moot."),n.a.createElement("p",null,"While there are still a lot of questions to be answered regarding moving CSS to JS space, there's no doubt in my mind that just being able to flip the arrow of responsibility makes it all worth it."),n.a.createElement("p",null,"One of the primary downsides of inline JS styles is that we can't use pseudoselectors such as ",n.a.createElement("code",null,":hover")," or ",n.a.createElement("code",null,"@media"),". I hope to show how we can get around that using helper libraries in an upcoming post.")),n.a.createElement("hr",null))}}},[["2xhq",1,0]]]);