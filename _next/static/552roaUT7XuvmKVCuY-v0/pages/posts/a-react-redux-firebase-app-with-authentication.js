(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{e0HO:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/a-react-redux-firebase-app-with-authentication",function(){var e=t("fOxC");return{page:e.default||e}}])},fOxC:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),s=t.n(l),n=t("JRaF"),r=(t("YFqc"),{url:"a-react-redux-firebase-app-with-authentication",id:"reduxfirebasedemo",title:"A React-Redux-Firebase app with authentication",author:"david",tags:["react","redux","case study","firebase"],date:"2015-11-22",excerpt:"Another Redux sample app, this time coupled with Firebase. Demonstrates authentication, validation and keeping all UI state in Redux.",type:"post",folder:"/Users/davidwaller/gitreps/mine/blog2/sources/2015-11-19_reduxfirebasedemo",hasStaticContent:!1,headlines:[{level:3,text:"The quotes app",id:"the-quotes-app"},{level:3,text:"App state",id:"app-state"},{level:3,text:"Authentication",id:"authentication"},{level:3,text:"Quotes",id:"quotes"},{level:3,text:"Feedback",id:"feedback"},{level:3,text:"Wrapping up",id:"wrapping-up"}]});a.default=function(){return s.a.createElement(n.a,{kind:"post",data:r,title:"A React-Redux-Firebase app with authentication",summary:"Another Redux sample app, this time coupled with Firebase. Demonstrates authentication, validation and keeping all UI state in Redux.",headlines:[{level:3,text:"The quotes app",id:"the-quotes-app"},{level:3,text:"App state",id:"app-state"},{level:3,text:"Authentication",id:"authentication"},{level:3,text:"Quotes",id:"quotes"},{level:3,text:"Feedback",id:"feedback"},{level:3,text:"Wrapping up",id:"wrapping-up"}],tags:["react","redux","case study","firebase"]},s.a.createElement("div",{className:"post","data-postid":"reduxfirebasedemo"},s.a.createElement("h3",{id:"the-quotes-app"},"The quotes app"),s.a.createElement("p",null,"This post presents an example app demonstrating how to can use Firebase on a React-Redux foundation. The app is a simple collection of quotes. If you log in (using Github credentials) you can add a new quote and edit/delete previous quotes added by you. Try it out below!"),s.a.createElement("iframe",{src:"https://blog.krawaller.se/reduxfirebasedemo/index.html",style:{height:600,width:"100%"}}),s.a.createElement("p",null,"You'll find the code repo ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo"},"here"),", and the app is published ",s.a.createElement("a",{href:"https://blog.krawaller.se/reduxfirebasedemo/#/?_k=98yl14"},"here"),"."),s.a.createElement("p",null,"The app was built as a demo for the ",s.a.createElement("a",{href:"https://coursepress.lnu.se/kurs/ria-utveckling-med-javascript/"},"RIA development course")," I'm running at ",s.a.createElement("a",{href:"http://lnu.se"},"Linnaeus university"),"."),s.a.createElement("p",null,"It is meant to serve as an example of several things:"),s.a.createElement("ul",null,s.a.createElement("li",null,"How to couple Redux and Firebase"),s.a.createElement("li",null,"How to let Redux manage all UI state"),s.a.createElement("li",null,"How to deal with validation in Redux"),s.a.createElement("li",null,"How to handle authentication")),s.a.createElement("h3",{id:"app-state"},"App state"),s.a.createElement("p",null,"As with all Redux app, the entire state of the app is stored in an object in one single store. Here's what the ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/store/initialstate.js"},"initial state")," looks like:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," C = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../constants"'),");",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = {",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"feedback"),": [",s.a.createElement("br",null),"    {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"msg"),":",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-string"},'"Welcome to this little demo! It is meant to demonstrate three things:"'),",",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),s.a.createElement("br",null),"    },",s.a.createElement("br",null),"    { ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"1) How to use Redux + Firebase"'),", ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," },",s.a.createElement("br",null),"    { ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"2) How to use authentication in a Redux app"'),", ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," },",s.a.createElement("br",null),"    {",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"3) How to have all UI state in Redux and none in the components"'),",",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),s.a.createElement("br",null),"    }",s.a.createElement("br",null),"  ],",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"auth"),": {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"currently"),": C.ANONYMOUS,",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"username"),": ",s.a.createElement("span",{className:"hljs-literal"},"null"),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"uid"),": ",s.a.createElement("span",{className:"hljs-literal"},"null"),s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"quotes"),": {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"hasreceiveddata"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"submittingnew"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"states"),": {}, ",s.a.createElement("span",{className:"hljs-comment"},"// this will store per quote id if we're reading, editing or awaiting DB response"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"data"),": {} ",s.a.createElement("span",{className:"hljs-comment"},"// this will contain firebase data"),s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("p",null,"As you can see the state can be divided into three parts;"),s.a.createElement("ol",null,s.a.createElement("li",null,s.a.createElement("code",null,"feedback"),": An array of UI messages to the user"),s.a.createElement("li",null,s.a.createElement("code",null,"auth"),": Information about the currently logged in user"),s.a.createElement("li",null,s.a.createElement("code",null,"quotes"),": The actual list of quotes, and also the UI state of each quote")),s.a.createElement("p",null,"We'll now look at the corresponding reducer and action creator for these three parts one at a time."),s.a.createElement("h3",{id:"authentication"},"Authentication"),s.a.createElement("p",null,"Beginning with authentication, here's what the ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/store/reducers/auth.js"},"reducer")," looks like:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," C = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../../constants"'),"),",s.a.createElement("br",null),"  initialState = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../initialstate"'),");",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"currentstate, action"),") "),"{",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"switch")," (action.type) {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.ATTEMPTING_LOGIN:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"currently"),": C.AWAITING_AUTH_RESPONSE,",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"username"),": ",s.a.createElement("span",{className:"hljs-string"},'"guest"'),",",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"uid"),": ",s.a.createElement("span",{className:"hljs-literal"},"null"),s.a.createElement("br",null),"      };",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.LOGOUT:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"currently"),": C.ANONYMOUS,",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"username"),": ",s.a.createElement("span",{className:"hljs-string"},'"guest"'),",",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"uid"),": ",s.a.createElement("span",{className:"hljs-literal"},"null"),s.a.createElement("br",null),"      };",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.LOGIN_USER:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"currently"),": C.LOGGED_IN,",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"username"),": action.username,",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"uid"),": action.uid",s.a.createElement("br",null),"      };",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"default"),":",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentstate || initialState.auth;",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("p",null,"You'll note there are three things that can happen;"),s.a.createElement("ol",null,s.a.createElement("li",null,s.a.createElement("code",null,"ATTEMPTING_LOGIN")," which is the user having entered his credentials and now awaiting a response"),s.a.createElement("li",null,s.a.createElement("code",null,"LOGIN_USER")," represents a successfull login"),s.a.createElement("li",null,s.a.createElement("code",null,"LOGOUT")," means we discard the current user credentials and reenter guestmode")),s.a.createElement("p",null,"So far we've seen no trace of actual Firebase code, which is to be expected. The reducers should always be instantaneous and free of side effects, and simply react synchronously to an action notification just received."),s.a.createElement("p",null,"Instead, the related Firebase code can be found in the ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/actions/auth.js"},"authentication action creators"),":"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," C = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../constants"'),"),",s.a.createElement("br",null),"  Firebase = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"firebase"'),"),",s.a.createElement("br",null),"  fireRef = ",s.a.createElement("span",{className:"hljs-keyword"},"new")," Firebase(C.FIREBASE);",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = {",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-comment"},"// called at app start"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"startListeningToAuth"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"dispatch, getState"),") "),"{",s.a.createElement("br",null),"      fireRef.onAuth(",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"authData"),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (authData) {",s.a.createElement("br",null),"          dispatch({",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.LOGIN_USER,",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"uid"),": authData.uid,",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-attr"},"username"),": authData.github.displayName || authData.github.username",s.a.createElement("br",null),"          });",s.a.createElement("br",null),"        } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (getState().auth.currently !== C.ANONYMOUS) {",s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-comment"},"// log out if not already logged out"),s.a.createElement("br",null),"            dispatch({ ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.LOGOUT });",s.a.createElement("br",null),"          }",s.a.createElement("br",null),"        }",s.a.createElement("br",null),"      });",s.a.createElement("br",null),"    };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"attemptLogin"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"dispatch, getState"),") "),"{",s.a.createElement("br",null),"      dispatch({ ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.ATTEMPTING_LOGIN });",s.a.createElement("br",null),"      fireRef.authWithOAuthPopup(",s.a.createElement("span",{className:"hljs-string"},'"github"'),", ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"error, authData"),") "),"{",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (error) {",s.a.createElement("br",null),"          dispatch({ ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.DISPLAY_ERROR, ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-string"},'"Login failed! "')," + error });",s.a.createElement("br",null),"          dispatch({ ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.LOGOUT });",s.a.createElement("br",null),"        } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"          ",s.a.createElement("span",{className:"hljs-comment"},"// no need to do anything here, startListeningToAuth have already made sure that we update on changes"),s.a.createElement("br",null),"        }",s.a.createElement("br",null),"      });",s.a.createElement("br",null),"    };",s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"logoutUser"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"dispatch, getState"),") "),"{",s.a.createElement("br",null),"      dispatch({ ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.LOGOUT }); ",s.a.createElement("span",{className:"hljs-comment"},"// don't really need to do this, but nice to get immediate feedback"),s.a.createElement("br",null),"      fireRef.unauth();",s.a.createElement("br",null),"    };",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("p",null,"We're using ",s.a.createElement("a",{href:"https://github.com/gaearon/redux-thunk"},"Redux-Thunk")," which allows for the action creators to return a function instead of a straight-up actions object, making asynchronous actions possible."),s.a.createElement("p",null,"There are three authentication-related action creators;"),s.a.createElement("ol",null,s.a.createElement("li",null,s.a.createElement("code",null,"startListeningToAuth")," is called att app start, setting upp the real-time updates from Firebase. This means we never have to bother catching the result of subsequent auth requests made to Firebase, this listener will catch them all!"),s.a.createElement("li",null,s.a.createElement("code",null,"attemptLogin")," is when a user submits his credentials. This synchronously fires an ",s.a.createElement("code",null,"ATTEMPTING_LOGIN")," action, setting the spinner to notify the user that judgement is a-coming."),s.a.createElement("li",null,s.a.createElement("code",null,"logoutUser")," is when a user clicks log out. Note that we synchronously log out here, not totally necessary since Firebase would push the log out to us.")),s.a.createElement("p",null,"Here's what the ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/index.js"},"app-start kickoff")," looks like:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," React = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"react"'),"),",s.a.createElement("br",null),"  ReactDOM = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"react-dom"'),"),",s.a.createElement("br",null),"  Router = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"react-router"'),").Router,",s.a.createElement("br",null),"  Provider = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"react-redux"'),").Provider,",s.a.createElement("br",null),"  store = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"./store"'),"),",s.a.createElement("br",null),"  routes = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"./routes"'),"),",s.a.createElement("br",null),"  actions = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"./actions"'),");",s.a.createElement("br",null),s.a.createElement("br",null),"ReactDOM.render(",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Provider")," ",s.a.createElement("span",{className:"hljs-attr"},"store"),"=",s.a.createElement("span",{className:"hljs-string"},"{store}"),">"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Router")," ",s.a.createElement("span",{className:"hljs-attr"},"routes"),"=",s.a.createElement("span",{className:"hljs-string"},"{routes}")," />"),s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"Provider"),">")),",",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-built_in"},"document"),".getElementById(",s.a.createElement("span",{className:"hljs-string"},'"root"'),")",s.a.createElement("br",null),");",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"setTimeout"),"(",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),") "),"{",s.a.createElement("br",null),"  store.dispatch(actions.startListeningToAuth());",s.a.createElement("br",null),"  store.dispatch(actions.startListeningToQuotes());",s.a.createElement("br",null),"});")),s.a.createElement("p",null,"Note the action calls at the very bottom."),s.a.createElement("p",null,"Now you've seen all authentication-related code. This code ensures that ",s.a.createElement("code",null,"appstate.auth")," contains the current user, which can then be queried by your other code. In a production app you'd also have security rules on the Firebase side of things to prevent easy manipulation."),s.a.createElement("h3",{id:"quotes"},"Quotes"),s.a.createElement("p",null,"Now let's look at the quotes-related code. To save you scrolling back, here's what the quote state looked like:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},"quotes: {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"hasreceiveddata"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"submittingnew"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"states"),": {}, ",s.a.createElement("span",{className:"hljs-comment"},"// this will store per quote id if we're reading, editing or awaiting DB response"),s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"data"),": {} ",s.a.createElement("span",{className:"hljs-comment"},"// this will contain firebase data"),s.a.createElement("br",null),"}")),s.a.createElement("p",null,"With that fresh on our retinas, here's the ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/store/reducers/quotes.js"},"reducer"),":"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," C = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../../constants"'),"),",s.a.createElement("br",null),"  initialState = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"../initialstate"'),"),",s.a.createElement("br",null),"  _ = ",s.a.createElement("span",{className:"hljs-built_in"},"require"),"(",s.a.createElement("span",{className:"hljs-string"},'"lodash"'),");",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"currentstate, action"),") "),"{",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"var")," newstate;",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"switch")," (action.type) {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.RECEIVE_QUOTES_DATA:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-built_in"},"Object"),".assign({}, currentstate, {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"hasreceiveddata"),": ",s.a.createElement("span",{className:"hljs-literal"},"true"),",",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"data"),": action.data",s.a.createElement("br",null),"      });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.AWAIT_NEW_QUOTE_RESPONSE:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-built_in"},"Object"),".assign({}, currentstate, {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"submittingnew"),": ",s.a.createElement("span",{className:"hljs-literal"},"true"),s.a.createElement("br",null),"      });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.RECEIVE_NEW_QUOTE_RESPONSE:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"hljs-built_in"},"Object"),".assign({}, currentstate, {",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"submittingnew"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),s.a.createElement("br",null),"      });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.START_QUOTE_EDIT:",s.a.createElement("br",null),"      newstate = _.cloneDeep(currentstate);",s.a.createElement("br",null),"      newstate.states[action.qid] = C.EDITING_QUOTE;",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," newstate;",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.FINISH_QUOTE_EDIT:",s.a.createElement("br",null),"      newstate = _.cloneDeep(currentstate);",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"delete")," newstate.states[action.qid];",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," newstate;",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.SUBMIT_QUOTE_EDIT:",s.a.createElement("br",null),"      newstate = _.cloneDeep(currentstate);",s.a.createElement("br",null),"      newstate.states[action.qid] = C.SUBMITTING_QUOTE;",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," newstate;",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"default"),":",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentstate || initialState.quotes;",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("p",null,"As the switch statement shows there are 6 quote actions:"),s.a.createElement("ol",null,s.a.createElement("li",null,s.a.createElement("code",null,"RECEIVE_QUOTES_DATA")," means an update from Firebase. We grab that payload and put it in ",s.a.createElement("code",null,"appstate.quotes.data"),"."),s.a.createElement("li",null,s.a.createElement("code",null,"AWAIT_NEW_QUOTE_RESPONSE")," is when we have submitted a new quote but haven't yet had an answer, so we should show a spinner in the form for adding new quotes."),s.a.createElement("li",null,s.a.createElement("code",null,"RECEIVE_NEW_QUOTE_RESPONSE")," means we got the answer on our request to add a new quote, so the new quote form should no longer show a spinner."),s.a.createElement("li",null,s.a.createElement("code",null,"START_QUOTE_EDIT"),' is when a user clicked "edit" on a quote he/she has written, so that qoute should now be displayed in a form.'),s.a.createElement("li",null,s.a.createElement("code",null,"C.FINISH_QUOTE_EDIT")," means they cancelled or received submit result, so the quote should no longer be displayed in a form"),s.a.createElement("li",null,s.a.createElement("code",null,"SUBMIT_QUOTE_EDIT")," is when they submitted an edit, so the form for that quote should now display a spinner.")),s.a.createElement("p",null,"Let's take a look at the render function for ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/pages/components/quote.js"},"a single quote"),", showing off all the quote state we've seen so far:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"}),")"),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," p = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props,",s.a.createElement("br",null),"        q = p.quote,",s.a.createElement("br",null),"        button;",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (p.state === C.EDITING_QUOTE){",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"form")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"quote"')," ",s.a.createElement("span",{className:"hljs-attr"},"onSubmit"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.submit}"),">"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"input")," ",s.a.createElement("span",{className:"hljs-attr"},"ref"),"=",s.a.createElement("span",{className:"hljs-string"},'"field"')," ",s.a.createElement("span",{className:"hljs-attr"},"defaultValue"),"=",s.a.createElement("span",{className:"hljs-string"},"{q.content}/"),">"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"button"')," ",s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.cancel}"),">"),"Cancel",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("br",null),"            ",s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"type"),"=",s.a.createElement("span",{className:"hljs-string"},'"submit"')," ",s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{this.submit}"),">"),"Submit",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"form"),">")),");",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (!p.mayedit){",s.a.createElement("br",null),"        button = ",s.a.createElement("span",{className:"hljs-string"},'""'),s.a.createElement("br",null),"    } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," ",s.a.createElement("span",{className:"hljs-keyword"},"if")," (p.state === C.SUBMITTING_QUOTE) {",s.a.createElement("br",null),"        button = ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"disabled"),"=",s.a.createElement("span",{className:"hljs-string"},'"disabled"'),">"),"Submitting...",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">")),";",s.a.createElement("br",null),"    } ",s.a.createElement("span",{className:"hljs-keyword"},"else")," {",s.a.createElement("br",null),"        button = ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"span"),">"),s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.edit}"),">"),"Edit",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"button")," ",s.a.createElement("span",{className:"hljs-attr"},"onClick"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.delete}"),">"),"Delete",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"button"),">"),s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"span"),">")),";",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"div")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"quote"'),">"),s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"span")," ",s.a.createElement("span",{className:"hljs-attr"},"className"),"=",s.a.createElement("span",{className:"hljs-string"},'"author"'),">"),'{q.username+" said: "}',s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"span"),">"),"{q.content} {button}",s.a.createElement("span",{className:"hljs-tag"},"</",s.a.createElement("span",{className:"hljs-name"},"div"),">")),";",s.a.createElement("br",null),"}")),s.a.createElement("p",null,"The quote is rendered in a ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/pages/quoteslist.js"},"quotelist parent component"),". This parent component is connected to Redux using ",s.a.createElement("a",{href:"https://github.com/rackt/react-redux"},"React-Redux"),":"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," mapStateToProps = ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"appState"),") "),"{",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"return")," {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"quotes"),": appState.quotes,",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"auth"),": appState.auth",s.a.createElement("br",null),"  };",s.a.createElement("br",null),"};",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-keyword"},"var")," mapDispatchToProps = ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"dispatch"),") "),"{",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"return")," {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"submitNewQuote"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"content"),") "),"{",s.a.createElement("br",null),"      dispatch(actions.submitNewQuote(content));",s.a.createElement("br",null),"    },",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"startEdit"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"qid"),") "),"{",s.a.createElement("br",null),"      dispatch(actions.startQuoteEdit(qid));",s.a.createElement("br",null),"    },",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"cancelEdit"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"qid"),") "),"{",s.a.createElement("br",null),"      dispatch(actions.cancelQuoteEdit(qid));",s.a.createElement("br",null),"    },",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"submitEdit"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"qid, content"),") "),"{",s.a.createElement("br",null),"      dispatch(actions.submitQuoteEdit(qid, content));",s.a.createElement("br",null),"    },",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"deleteQuote"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"qid"),") "),"{",s.a.createElement("br",null),"      dispatch(actions.deleteQuote(qid));",s.a.createElement("br",null),"    }",s.a.createElement("br",null),"  };",s.a.createElement("br",null),"};",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = ReactRedux.connect(mapStateToProps, mapDispatchToProps)(",s.a.createElement("br",null),"  Quoteslist",s.a.createElement("br",null),");")),s.a.createElement("p",null,"And it renders each quote like thus, passing down the relevant state and callbacks:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-keyword"},"var")," p = ",s.a.createElement("span",{className:"hljs-built_in"},"this"),".props,",s.a.createElement("br",null),"  rows = _.map(p.quotes.data, ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"quote, qid"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"var")," quotestate = p.quotes.states[qid];",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," (",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"xml"},s.a.createElement("span",{className:"hljs-tag"},"<",s.a.createElement("span",{className:"hljs-name"},"Quote"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"key"),"=",s.a.createElement("span",{className:"hljs-string"},"{qid}"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"quote"),"=",s.a.createElement("span",{className:"hljs-string"},"{quote}"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"qid"),"=",s.a.createElement("span",{className:"hljs-string"},"{qid}"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"state"),"=",s.a.createElement("span",{className:"hljs-string"},"{quotestate}"),s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"edit"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.startEdit.bind(this,")," ",s.a.createElement("span",{className:"hljs-attr"},"qid"),")}",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"cancel"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.cancelEdit.bind(this,")," ",s.a.createElement("span",{className:"hljs-attr"},"qid"),")}",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"submit"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.submitEdit.bind(this,")," ",s.a.createElement("span",{className:"hljs-attr"},"qid"),")}",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"delete"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.deleteQuote.bind(this,")," ",s.a.createElement("span",{className:"hljs-attr"},"qid"),")}",s.a.createElement("br",null),"        ",s.a.createElement("span",{className:"hljs-attr"},"mayedit"),"=",s.a.createElement("span",{className:"hljs-string"},"{p.auth.uid")," === ",s.a.createElement("span",{className:"hljs-string"},"quote.uid}"),s.a.createElement("br",null),"      />")),s.a.createElement("br",null),"    );",s.a.createElement("br",null),"  }).reverse();")),s.a.createElement("p",null,"Note how it checks if you're allowed to edit this quote by comparing ",s.a.createElement("code",null,"quote.uid")," with the ",s.a.createElement("code",null,"uid")," of the currently logged in user."),s.a.createElement("h3",{id:"feedback"},"Feedback"),s.a.createElement("p",null,"For completion's sake let's also look at the feedback functionality, which is much simpler and doesn't include Firebase. The feedback state is just an array of string messages to show:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},"feedback: [",s.a.createElement("br",null),"  {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"msg"),":",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-string"},'"Welcome to this little demo! It is meant to demonstrate three things:"'),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),s.a.createElement("br",null),"  },",s.a.createElement("br",null),"  { ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"1) How to use Redux + Firebase"'),", ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," },",s.a.createElement("br",null),"  { ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"2) How to use authentication in a Redux app"'),", ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," },",s.a.createElement("br",null),"  {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": ",s.a.createElement("span",{className:"hljs-string"},'"3) How to have all UI state in Redux and none in the components"'),",",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false"),s.a.createElement("br",null),"  }",s.a.createElement("br",null),"];")),s.a.createElement("p",null,"The ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/store/reducers/feedback.js"},"feedback reducer")," deals with 3 actions:"),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"currentfeedback, action"),") "),"{",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-keyword"},"switch")," (action.type) {",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.DISMISS_FEEDBACK:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentfeedback.filter(",s.a.createElement("span",{className:"hljs-function"},"(",s.a.createElement("span",{className:"hljs-params"},"i, n"),") =>")," n !== action.num);",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.DISPLAY_ERROR:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentfeedback.concat({ ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": action.error, ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"true")," });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"case")," C.DISPLAY_MESSAGE:",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentfeedback.concat({ ",s.a.createElement("span",{className:"hljs-attr"},"msg"),": action.message, ",s.a.createElement("span",{className:"hljs-attr"},"error"),": ",s.a.createElement("span",{className:"hljs-literal"},"false")," });",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"default"),":",s.a.createElement("br",null),"      ",s.a.createElement("span",{className:"hljs-keyword"},"return")," currentfeedback || initialState.feedback;",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("p",null,"And the related ",s.a.createElement("a",{href:"https://github.com/krawaller/reduxfirebasedemo/blob/gh-pages/src/actions/feedback.js"},"feedback action creator")," contains just one single thing, namely a function to dismiss a feedback message. Adding messages / errors are only done inside of other action creators."),s.a.createElement("pre",null,s.a.createElement("code",{className:"hljs language-javascript"},s.a.createElement("span",{className:"hljs-built_in"},"module"),".exports = {",s.a.createElement("br",null),"  ",s.a.createElement("span",{className:"hljs-attr"},"dismissFeedback"),": ",s.a.createElement("span",{className:"hljs-function"},s.a.createElement("span",{className:"hljs-keyword"},"function"),"(",s.a.createElement("span",{className:"hljs-params"},"num"),") "),"{",s.a.createElement("br",null),"    ",s.a.createElement("span",{className:"hljs-keyword"},"return")," { ",s.a.createElement("span",{className:"hljs-attr"},"type"),": C.DISMISS_FEEDBACK, ",s.a.createElement("span",{className:"hljs-attr"},"num"),": num };",s.a.createElement("br",null),"  }",s.a.createElement("br",null),"};")),s.a.createElement("h3",{id:"wrapping-up"},"Wrapping up"),s.a.createElement("p",null,"Perhaps this demo took on more than it can chew, but I hope it at least can serve as an example of how to pair Redux and Firebase in a sane way.")),s.a.createElement("hr",null))}}},[["e0HO",1,0]]]);