(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"2IS5":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/composition-in-cyclejs-choo-react-and-angular2",function(){var e=t("JUL6");return{page:e.default||e}}])},JUL6:function(e,a,t){"use strict";t.r(a);var l=t("q1tI"),n=t.n(l),s=t("JRaF"),c=(t("YFqc"),{url:"composition-in-cyclejs-choo-react-and-angular2",id:"comparison",type:"post",title:"Composition in CycleJS, Choo, React and Angular2",date:"2016-07-06",tags:["cyclejs","react","angular2","choo"],author:"david",excerpt:"Comparing loosely coupled composition in four different frameworks by implementing the same small app in all of them",draft:!1,folder:"/Users/davidwaller/gitreps/mine/blog2/sources/2016-07-06_comparison",hasStaticContent:!0,headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"The application",id:"the-application"},{level:3,text:"React implementation",id:"react-implementation"},{level:4,text:"The `Confirm` component in React",id:"the-confirm-component-in-react"},{level:4,text:"The `Submission` component in React",id:"the-submission-component-in-react"},{level:3,text:"Angular2 implementation",id:"angular2-implementation"},{level:4,text:"The `Confirm` component in Angular2",id:"the-confirm-component-in-angular2"},{level:4,text:"The `Submission` component in Angular2",id:"the-submission-component-in-angular2"},{level:3,text:"CycleJS implementation",id:"cyclejs-implementation"},{level:4,text:"The `Confirm` component in CycleJS",id:"the-confirm-component-in-cyclejs"},{level:4,text:"The `Submission` component in CycleJS",id:"the-submission-component-in-cyclejs"},{level:3,text:"Choo implementation",id:"choo-implementation"},{level:4,text:"The `Confirm` component in Choo",id:"the-confirm-component-in-choo"},{level:4,text:"The `Submission` component in Choo",id:"the-submission-component-in-choo"},{level:3,text:"Comparison",id:"comparison"},{level:4,text:"Comparing rendering",id:"comparing-rendering"},{level:4,text:"Comparing state",id:"comparing-state"},{level:4,text:"Comparing communication",id:"comparing-communication"},{level:3,text:"Wrapping up",id:"wrapping-up"}]});a.default=function(){return n.a.createElement(s.a,{kind:"post",data:c,title:"Composition in CycleJS, Choo, React and Angular2",summary:"Comparing loosely coupled composition in four different frameworks by implementing the same small app in all of them",headlines:[{level:3,text:"The premise",id:"the-premise"},{level:3,text:"The application",id:"the-application"},{level:3,text:"React implementation",id:"react-implementation"},{level:4,text:"The `Confirm` component in React",id:"the-confirm-component-in-react"},{level:4,text:"The `Submission` component in React",id:"the-submission-component-in-react"},{level:3,text:"Angular2 implementation",id:"angular2-implementation"},{level:4,text:"The `Confirm` component in Angular2",id:"the-confirm-component-in-angular2"},{level:4,text:"The `Submission` component in Angular2",id:"the-submission-component-in-angular2"},{level:3,text:"CycleJS implementation",id:"cyclejs-implementation"},{level:4,text:"The `Confirm` component in CycleJS",id:"the-confirm-component-in-cyclejs"},{level:4,text:"The `Submission` component in CycleJS",id:"the-submission-component-in-cyclejs"},{level:3,text:"Choo implementation",id:"choo-implementation"},{level:4,text:"The `Confirm` component in Choo",id:"the-confirm-component-in-choo"},{level:4,text:"The `Submission` component in Choo",id:"the-submission-component-in-choo"},{level:3,text:"Comparison",id:"comparison"},{level:4,text:"Comparing rendering",id:"comparing-rendering"},{level:4,text:"Comparing state",id:"comparing-state"},{level:4,text:"Comparing communication",id:"comparing-communication"},{level:3,text:"Wrapping up",id:"wrapping-up"}],tags:["cyclejs","react","angular2","choo"]},n.a.createElement("div",{className:"post","data-postid":"comparison"},n.a.createElement("h3",{id:"the-premise"},"The premise"),n.a.createElement("p",null,"In this post we will compare how loosely coupled composition is done in ",n.a.createElement("a",{href:"https://facebook.github.io/react/"},"React"),", ",n.a.createElement("a",{href:"https://angular.io"},"Angular2"),", ",n.a.createElement("a",{href:"https://github.com/yoshuawuyts/choo"},"Choo")," and ",n.a.createElement("a",{href:"http://cycle.js.org/"},"Cycle"),". The setup is similar to the TodoMVC project, meaning we will ",n.a.createElement("strong",null,"implement the same application in all frameworks"),". Our app is however much smaller in scope than TodoMVC, and focused on the aspect of composition."),n.a.createElement("p",null,"I (David) wrote this in collaboration with the talented fellow JS-nerd ",n.a.createElement("a",{href:"https://github.com/mw222rs/"},"Mattias"),", who wrote the Choo version and got me interested in that framework. I hope to lure him into doing more writing here in the future!"),n.a.createElement("h3",{id:"the-application"},"The application"),n.a.createElement("p",null,"The example application is a simple submission form. The flow is like thus:"),n.a.createElement("ol",null,n.a.createElement("li",null,"Enter text in the field"),n.a.createElement("li",null,"Click submit (and then comfirm)"),n.a.createElement("li",null,"The latest submitted text is shown below the field.")),n.a.createElement("p",null,"Try it out below!"),n.a.createElement("iframe",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/applets/comparison/index.html",height:"100px",width:"100%"}),n.a.createElement("p",null,"The application is made up by two components - a child ",n.a.createElement("code",null,"Confirm")," button, which is then used by the parent ",n.a.createElement("code",null,"Submission")," component making up the form."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"Confirm")," button has three different modes, which should be tracked in an internal ",n.a.createElement("strong",null,"status")," state:"),n.a.createElement("ul",null,n.a.createElement("li",null,"Showing ",n.a.createElement("code",null,"Submit"),' but greyed out ("disabled")'),n.a.createElement("li",null,"Showing ",n.a.createElement("code",null,"Submit"),' ("waiting")'),n.a.createElement("li",null,"Showing ",n.a.createElement("code",null,"Cancel")," and ",n.a.createElement("code",null,"Confirm"),'. ("confirm")')),n.a.createElement("p",null,"Meanwhile the ",n.a.createElement("code",null,"Submission")," component holds the current content of the ",n.a.createElement("strong",null,"field"),", as well as the latest ",n.a.createElement("strong",null,"submission"),"."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"Submission")," component needs to tell ",n.a.createElement("code",null,"Confirm")," whether it is ",n.a.createElement("strong",null,"disabled")," (since ",n.a.createElement("code",null,"Confirm")," doesn't know the contents of the field). ",n.a.createElement("code",null,"Submission")," also listens for ",n.a.createElement("strong",null,"submit")," events from ",n.a.createElement("code",null,"Confirm"),", to know when a submission is made."),n.a.createElement("p",null,"The state and communication can be expressed through the following diagram:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/overview.svg",alt:"overview"})),n.a.createElement("p",null,"We will now implement these two components in all four frameworks, and then discuss the comparison. The main rule will be that ",n.a.createElement("code",null,"Confirm")," should be decoupled enough to be reusable in a completely different app."),n.a.createElement("p",null,"All of the code can be found on ",n.a.createElement("a",{href:"https://github.com/krawaller/comparison"},"GitHub")," as well as in the Webpackbins linked in each chapter. "),n.a.createElement("h3",{id:"react-implementation"},"React implementation"),n.a.createElement("p",null,"First out - React! You can find a Webpackbin with the app running at ",n.a.createElement("a",{href:"http://www.webpackbin.com/Ey70dIVI-"},"http://www.webpackbin.com/Ey70dIVI-"),"."),n.a.createElement("p",null,"React's model is very simple - everything is made up by ",n.a.createElement("strong",null,"components"),", whose UI are the results of their internal ",n.a.createElement("strong",null,"state")," and the ",n.a.createElement("strong",null,"properties")," passed from the parent."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/reactcomp.svg",alt:"reactcomp"})),n.a.createElement("p",null,"A parent talks to the child by passing props. If a child needs to be able to answer, we pass a ",n.a.createElement("em",null,"callback")," prop which the child should call at the appropriate time."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/reactcommunication.svg",alt:"reactcommunication"})),n.a.createElement("p",null,"If we need more app-wide communication we might want to use something like ",n.a.createElement("a",{href:"http://redux.js.org/"},"Redux")," instead, but that would be overkill for this implementation."),n.a.createElement("h4",{id:"the-confirm-component-in-react"},"The ",n.a.createElement("code",null,"Confirm")," component in React"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},"let Confirm = React.createClass({",n.a.createElement("br",null),"  getInitialState: ()=> ({status:'waiting'}),",n.a.createElement("br",null),"  maybe() { this.setState({status:'confirm'}) },",n.a.createElement("br",null),"  changedmymind() { this.setState({status:'waiting'}) },",n.a.createElement("br",null),"  yesimsure() {",n.a.createElement("br",null),"    this.props.confirm();",n.a.createElement("br",null),"    this.setState({status:'waiting'})",n.a.createElement("br",null),"  },",n.a.createElement("br",null),"  render() {",n.a.createElement("br",null),"    return this.state.status !== 'confirm'",n.a.createElement("br",null),"    ? <button onClick={this.maybe} disabled={this.props.disabled}>Submit</button>",n.a.createElement("br",null),"    : <span>",n.a.createElement("br",null),"        <button onClick={this.changedmymind}>Cancel</button>",n.a.createElement("br",null),"        <button onClick={this.yesimsure}>Confirm</button>",n.a.createElement("br",null),"      </span>",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"})")),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"status")," of the button is kept in state, while whether or not we're ",n.a.createElement("code",null,"disabled")," is received as a prop from the parent. We also receive a ",n.a.createElement("code",null,"props.confirm")," callback, which we call when the user confirms their submission."),n.a.createElement("h4",{id:"the-submission-component-in-react"},"The ",n.a.createElement("code",null,"Submission")," component in React"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},"let Submission = React.createClass({",n.a.createElement("br",null),"  getInitialState: ()=> ({submission:'',field:''}),",n.a.createElement("br",null),"  onConfirm() { this.setState({submission:this.state.field, field:''}) },",n.a.createElement("br",null),"  onChange(e) { this.setState({field:e.target.value}) },",n.a.createElement("br",null),"  render() { return (",n.a.createElement("br",null),"    <div>",n.a.createElement("br",null),"      <input value={this.state.field} onChange={this.onChange}/>",n.a.createElement("br",null),"      <Confirm disabled={!this.state.field} confirm={this.onConfirm}/>",n.a.createElement("br",null),"      <p>Submitted value: {this.state.submission}</p>",n.a.createElement("br",null),"    </div>",n.a.createElement("br",null),"  )}",n.a.createElement("br",null),"})")),n.a.createElement("p",null,"We can see that ",n.a.createElement("code",null,"submission")," and ",n.a.createElement("code",null,"field")," is explicitly kept in state. We pass ",n.a.createElement("code",null,"disabled")," and an ",n.a.createElement("code",null,"onConfirm")," handler to the child."),n.a.createElement("p",null,"Note that we could opt to store ",n.a.createElement("code",null,"field")," in the DOM node and read it from the element in the ",n.a.createElement("code",null,"onConfirm")," handler using a ",n.a.createElement("a",{href:"https://facebook.github.io/react/docs/more-about-refs.html"},"ref"),". This however isn't considered as idiomatic. See more ",n.a.createElement("a",{href:"https://facebook.github.io/react/docs/forms.html#uncontrolled-components"},"here"),"."),n.a.createElement("h3",{id:"angular2-implementation"},"Angular2 implementation"),n.a.createElement("p",null,"Now for the Angular2 implementation, which you can get in a Webpackbin at ",n.a.createElement("a",{href:"http://www.webpackbin.com/VkPFPSXL-"},"http://www.webpackbin.com/VkPFPSXL-"),". Unlike it's predecessor, an Angular2 app is made up by composable components much like React."),n.a.createElement("p",null,"A component consists of a decorator call containing template and other metadata, and a class for holding state and methods. Inputs and outputs are explicitly declared in these classes."),n.a.createElement("h4",{id:"the-confirm-component-in-angular2"},"The ",n.a.createElement("code",null,"Confirm")," component in Angular2"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-meta"},"@Component"),"({",n.a.createElement("br",null),"  selector: ",n.a.createElement("span",{className:"hljs-string"},"'confirm'"),",",n.a.createElement("br",null),"  template: ",n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),"    <span *ngIf=\"status !== 'confirm'\">",n.a.createElement("br",null),'      <button (click)="maybe()" [disabled]="status === \'disabled\'">Submit</button>',n.a.createElement("br",null),"    </span>",n.a.createElement("br",null),"    <span *ngIf=\"status === 'confirm'\">",n.a.createElement("br",null),'      <button (click)="changedmymind()">Cancel</button>',n.a.createElement("br",null),'      <button (click)="yesimsure()">Confirm</button>',n.a.createElement("br",null),"    </span>",n.a.createElement("br",null),"  `"),n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-keyword"},"class")," Confirm {",n.a.createElement("br",null),"  status: ",n.a.createElement("span",{className:"hljs-built_in"},"string")," = ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-meta"},"@Output"),"() confirm = ",n.a.createElement("span",{className:"hljs-keyword"},"new")," EventEmitter()",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-meta"},"@Input"),"() ",n.a.createElement("span",{className:"hljs-keyword"},"set")," disabled(bool: ",n.a.createElement("span",{className:"hljs-built_in"},"boolean"),"){",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".status = bool ? ",n.a.createElement("span",{className:"hljs-string"},"'disabled'")," : ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"  maybe() { ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".status = ",n.a.createElement("span",{className:"hljs-string"},"'confirm'")," }",n.a.createElement("br",null),"  changedmymind() { ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".status = ",n.a.createElement("span",{className:"hljs-string"},"'waiting'")," }",n.a.createElement("br",null),"  yesimsure() { ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".confirm.emit(); ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".status = ",n.a.createElement("span",{className:"hljs-string"},"'waiting'")," }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"The button ",n.a.createElement("code",null,"status")," is stored in a property in the class. We see that ",n.a.createElement("code",null,"disabled")," is defined as a boolean ",n.a.createElement("code",null,"Input"),", to which we apply a setter that toggles ",n.a.createElement("code",null,"status")," accordingly."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"confirm")," action is an EventEmitter ",n.a.createElement("code",null,"Output"),". These are ",n.a.createElement("a",{href:"http://reactivex.io/"},"RxJS")," streams, which the rendering parents can subscribe to."),n.a.createElement("h4",{id:"the-submission-component-in-angular2"},"The ",n.a.createElement("code",null,"Submission")," component in Angular2"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-meta"},"@Component"),"({",n.a.createElement("br",null),"  selector: ",n.a.createElement("span",{className:"hljs-string"},"'submission'"),",",n.a.createElement("br",null),"  template: ",n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),'    <input #field (input)="0">',n.a.createElement("br",null),'    <confirm (confirm)="onConfirm()" [disabled]="!field.value.length"></confirm>',n.a.createElement("br",null),"    <p>Submitted value: {{submission}}</p>",n.a.createElement("br",null),"  `"),",",n.a.createElement("br",null),"  directives: [Confirm]",n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"class")," Submission {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-meta"},"@ViewChild"),"(",n.a.createElement("span",{className:"hljs-string"},"'field'"),") input: Control",n.a.createElement("br",null),"  field: ",n.a.createElement("span",{className:"hljs-built_in"},"string"),n.a.createElement("br",null),"  submission: ",n.a.createElement("span",{className:"hljs-built_in"},"string"),n.a.createElement("br",null),"  onConfirm() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".submission = ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".input.nativeElement.value",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".input.nativeElement.value = ",n.a.createElement("span",{className:"hljs-string"},"''"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Here we attach an ",n.a.createElement("code",null,"onConfirm")," listener to the ",n.a.createElement("code",null,"confirm")," stream output from the child component."),n.a.createElement("p",null,"Unlike the React implementation we don't store the ",n.a.createElement("code",null,"field")," value in state, instead we leave this to the DOM and simply collect it when we need it using ",n.a.createElement("a",{href:"https://angular.io/docs/ts/latest/api/core/index/ViewChild-var.html"},n.a.createElement("code",null,"ViewChild")),"."),n.a.createElement("p",null,"We don't really need to add the ",n.a.createElement("code",null,"field")," and ",n.a.createElement("code",null,"submission")," props to the class definition since we don't initialize them, but it is good to do it anyway for clarity."),n.a.createElement("h3",{id:"cyclejs-implementation"},"CycleJS implementation"),n.a.createElement("p",null,"Of these four frameworks CycleJS is probably the most exotic one. A Cycle app contains no imperative programming and no state machines - everything is just streams! A component receives a bunch of streams as input (called ",n.a.createElement("code",null,"sources"),"), and returns another bunch as output (called ",n.a.createElement("code",null,"sinks"),")."),n.a.createElement("p",null,"We will implement our app following the ",n.a.createElement("a",{href:"http://cycle.js.org/model-view-intent.html"},"Model-View-Intent")," pattern:"),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/mvi.svg",alt:"mvi"})),n.a.createElement("ol",null,n.a.createElement("li",null,"A component receives ",n.a.createElement("code",null,"sources")," from the parent or the root renderer"),n.a.createElement("li",null,"The ",n.a.createElement("code",null,"intent")," function translates these to a stream of ",n.a.createElement("code",null,"actions")),n.a.createElement("li",null,"The ",n.a.createElement("code",null,"actions")," are sent to the ",n.a.createElement("code",null,"model")," function who returns the component ",n.a.createElement("code",null,"state")),n.a.createElement("li",null,"That ",n.a.createElement("code",null,"state")," is given to the ",n.a.createElement("code",null,"view")," function which translates it to ",n.a.createElement("strong",null,"virtual DOM"),", often called ",n.a.createElement("code",null,"vtree")),n.a.createElement("li",null,"Finally we return the ",n.a.createElement("code",null,"vtree")," as part of the ",n.a.createElement("code",null,"sinks"),", maybe coupled with other stuff from ",n.a.createElement("code",null,"actions")," and ",n.a.createElement("code",null,"state")," that are of interest to the outside world.")),n.a.createElement("p",null,"The Webpackbin for this implementation can be found at ",n.a.createElement("a",{href:"http://www.webpackbin.com/VJZkw6SUZ"},"http://www.webpackbin.com/VJZkw6SUZ"),"."),n.a.createElement("h4",{id:"the-confirm-component-in-cyclejs"},"The ",n.a.createElement("code",null,"Confirm")," component in CycleJS"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," intent = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"sources"),"=>")," xs.merge(",n.a.createElement("br",null),"  sources.disabled$.map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i"),"=>")," i ? ",n.a.createElement("span",{className:"hljs-string"},"'DISABLE'")," : ",n.a.createElement("span",{className:"hljs-string"},"'ENABLE'"),"),",n.a.createElement("br",null),"  sources.DOM.select(",n.a.createElement("span",{className:"hljs-string"},"'.maybe'"),").events(",n.a.createElement("span",{className:"hljs-string"},"'click'"),").map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i"),"=>"),n.a.createElement("span",{className:"hljs-string"},"'MAYBE'"),"),",n.a.createElement("br",null),"  sources.DOM.select(",n.a.createElement("span",{className:"hljs-string"},"'.cancel'"),").events(",n.a.createElement("span",{className:"hljs-string"},"'click'"),").map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i"),"=>"),n.a.createElement("span",{className:"hljs-string"},"'CANCEL'"),"),",n.a.createElement("br",null),"  sources.DOM.select(",n.a.createElement("span",{className:"hljs-string"},"'.confirm'"),").events(",n.a.createElement("span",{className:"hljs-string"},"'click'"),").map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i"),"=>"),n.a.createElement("span",{className:"hljs-string"},"'CONFIRM'"),")",n.a.createElement("br",null),")",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," model = action$ => action$.fold(",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"s,action"),")=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"switch"),"(action){",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},"'DISABLE'"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-string"},"'disabled'"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},"'MAYBE'"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-string"},"'confirm'"),n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},"'ENABLE'"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," s === ",n.a.createElement("span",{className:"hljs-string"},"'disabled'")," ? ",n.a.createElement("span",{className:"hljs-string"},"'waiting'")," : s",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"default"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"},",n.a.createElement("span",{className:"hljs-string"},"'disabled'"),")",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," view = state$ => state$.map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"state"),"=>")," state === ",n.a.createElement("span",{className:"hljs-string"},"'confirm'"),n.a.createElement("br",null),"  ? span([button(",n.a.createElement("span",{className:"hljs-string"},"'.confirm'"),",",n.a.createElement("span",{className:"hljs-string"},"'Confirm'"),"),button(",n.a.createElement("span",{className:"hljs-string"},"'.cancel'"),",",n.a.createElement("span",{className:"hljs-string"},"'Cancel'"),")])",n.a.createElement("br",null),"  : button(",n.a.createElement("span",{className:"hljs-string"},"'.maybe'"),",{attrs:{disabled: state === ",n.a.createElement("span",{className:"hljs-string"},"'disabled'"),"}},",n.a.createElement("span",{className:"hljs-string"},"'Submit'"),")",n.a.createElement("br",null),")",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," Confirm = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"sources"),"=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," action$ = intent(sources)  ",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," state$ = model(action$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," vtree$ = view(state$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {",n.a.createElement("br",null),"    DOM: vtree$,",n.a.createElement("br",null),"    submit$: action$.filter(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i")," =>")," i === ",n.a.createElement("span",{className:"hljs-string"},"'CONFIRM'"),")",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Note how we assume ",n.a.createElement("code",null,"disabled$")," to exist among ",n.a.createElement("code",null,"sources"),", which needs to be provided by the parent. The ",n.a.createElement("code",null,"intent")," function doesn't separate local and foreign events - we get a stream containing ",n.a.createElement("code",null,"DISABLE")," and ",n.a.createElement("code",null,"ENABLE")," from the parent, jumbled with the local events ",n.a.createElement("code",null,"MAYBE"),", ",n.a.createElement("code",null,"CANCEL")," and ",n.a.createElement("code",null,"CONFIRM"),"."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"model")," function returns a single string as state, namely which mode the button is in - ",n.a.createElement("code",null,"disabled"),", ",n.a.createElement("code",null,"waiting")," or ",n.a.createElement("code",null,"confirm"),"."),n.a.createElement("h4",{id:"the-submission-component-in-cyclejs"},"The ",n.a.createElement("code",null,"Submission")," component in CycleJS"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," intent = ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"DOM,childSubmit$"),")=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," input$ = DOM.select(",n.a.createElement("span",{className:"hljs-string"},"'.field'"),").events(",n.a.createElement("span",{className:"hljs-string"},"'input'"),")",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," newValue$ = input$",n.a.createElement("br",null),"    .map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"e")," =>")," ({",n.a.createElement("span",{className:"hljs-keyword"},"type"),":",n.a.createElement("span",{className:"hljs-string"},"'INPUT'"),", data:e.target.value}))",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," submit$ = input$",n.a.createElement("br",null),"    .map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i"),"=>")," childSubmit$.map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"s"),"=>"),"({",n.a.createElement("span",{className:"hljs-keyword"},"type"),":",n.a.createElement("span",{className:"hljs-string"},"'SUBMIT'"),", data:i.target.value})))",n.a.createElement("br",null),"    .flatten()",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," xs.merge(submit$,newValue$)",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," model = action$ => action$.fold(",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"state, action"),")=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"switch"),"(action.type){",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},"'INPUT'"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {...state, field: action.data}",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"case")," ",n.a.createElement("span",{className:"hljs-string"},"'SUBMIT'"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {submission: action.data, field: ",n.a.createElement("span",{className:"hljs-string"},"''"),"}",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"default"),": ",n.a.createElement("span",{className:"hljs-keyword"},"return")," state",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}, {submission:",n.a.createElement("span",{className:"hljs-string"},"''"),",field:",n.a.createElement("span",{className:"hljs-string"},"''"),"} )",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," view = ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"state$,confirmvtree$"),")=>"),n.a.createElement("br",null),"  xs.combine(state$,confirmvtree$).map(",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"[state,confirmvtree]"),")=>"),n.a.createElement("br",null),"    div([",n.a.createElement("br",null),"      input(",n.a.createElement("span",{className:"hljs-string"},"'.field'"),", {props:{value: state.field}}),",n.a.createElement("br",null),"      confirmvtree,",n.a.createElement("br",null),"      p(",n.a.createElement("span",{className:"hljs-string"},"'Submitted value: '"),"+state.submission)",n.a.createElement("br",null),"    ])",n.a.createElement("br",null),"  )",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," ",n.a.createElement("span",{className:"hljs-title"},"SubmissionMain"),"(",n.a.createElement("span",{className:"hljs-params"},"sources"),")"),"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," action$ = intent(sources.DOM, sources.childsinks.submit$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," state$ = model(action$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," vtree$ = view(state$, sources.childsinks.DOM)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {",n.a.createElement("br",null),"    DOM: vtree$,",n.a.createElement("br",null),"    disabled$: action$.map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"a")," =>")," a.type === ",n.a.createElement("span",{className:"hljs-string"},"'SUBMIT'")," || !a.data)",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," Submission = withComponent(SubmissionMain,Confirm,",n.a.createElement("span",{className:"hljs-string"},"'disabled$'"),")")),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"withComponent")," composition helper is the one introduced in ",n.a.createElement("a",{href:"https://blog.krawaller.se/posts/exploring-composition-in-cyclejs/"},"this post"),". The purpose is to help solve the circular dependencies between parent and child sinks and sources, by making child sinks appear in parent sources, and selected parent sources in child sinks (in our case ",n.a.createElement("code",null,"disabled$"),")."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"intent")," function picks up two different actions - a local ",n.a.createElement("code",null,"INPUT")," action when the user types in the field, and a ",n.a.createElement("code",null,"SUBMIT")," action bubbling up from the child."),n.a.createElement("p",null,"The ",n.a.createElement("code",null,"model")," function derives a state object containing ",n.a.createElement("code",null,"field")," and ",n.a.createElement("code",null,"submission"),", which we recognise from the other implementations."),n.a.createElement("h3",{id:"choo-implementation"},"Choo implementation"),n.a.createElement("p",null,"Last but not least, here is the Choo implementation! It is running in a Webpackbin at ",n.a.createElement("a",{href:"http://www.webpackbin.com/4y4Mt94UZ"},"http://www.webpackbin.com/4y4Mt94UZ"),"."),n.a.createElement("p",null,"If CycleJS is the most exotic of our four frameworks, Choo is definitely the newest of the bunch with its first commit only a month ago. Choo is tiny, weighing in at only 7kb and with a small, easy-to-learn API. I (Mattias) kind of think of it as a shrunken down react-redux app with pink sparkles and strawberry frosting. It's darn cute."),n.a.createElement("p",null,"In Choo it is common to have an app-wide ",n.a.createElement("code",null,"model"),", very similar to Redux' role in React. But according to our self-imposed rules the components should be stand-alone and reusable, and so must contain their own model definitions! We accomplish this by defining the components in constructors which you pass the ",n.a.createElement("code",null,"app")," object to, so each component can register the model parts they need."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/chooconstr.svg",alt:"choo constr"})),n.a.createElement("p",null,"A Choo ",n.a.createElement("code",null,"model")," definition consists of ",n.a.createElement("code",null,"state"),", ",n.a.createElement("code",null,"reducers")," to manipulate that state, and ",n.a.createElement("code",null,"effects")," for side effects. If the optional ",n.a.createElement("code",null,"namespace")," property is set the reducers and effects can only access the state within its own model to provide, as the documentation puts it, 'sturdiness'."),n.a.createElement("p",null,"The actual component is then just a pure function that receives the application ",n.a.createElement("code",null,"state"),", a ",n.a.createElement("code",null,"send")," method for triggering effects and reducers, and whatever else you want to pass in. The component function returns DOM nodes for rendering, but unlike the other three frameworks Choo does not use virtual DOM nodes, but instead uses ",n.a.createElement("a",{href:"https://github.com/patrick-steele-idem/morphdom"},"morphdom")," to diff real DOM nodes. "),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/choorender.svg",alt:"choo render"})),n.a.createElement("p",null,"Note that we are using Choo version ",n.a.createElement("code",null,"2.3.1"),", but ",n.a.createElement("code",null,"3.0.0")," ",n.a.createElement("a",{href:"https://github.com/yoshuawuyts/choo/blob/master/CHANGELOG.md#300"},"just came out"),". We'll hopefully take a look at what has changed in an upcoming, all-choo post!"),n.a.createElement("h4",{id:"the-confirm-component-in-choo"},"The ",n.a.createElement("code",null,"Confirm")," component in Choo"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," Confirm = ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"app,confirmevent"),")=>")," {",n.a.createElement("br",null),"  app.model({",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"namespace"),": ",n.a.createElement("span",{className:"hljs-string"},"'confButt'"),",",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"state"),": { ",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'waiting'")," },",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"reducers"),": {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"maybeSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'confirm'"),"}),",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"cancelSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),"})",n.a.createElement("br",null),"    },",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"effects"),": {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"confirmSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state, send"),")=>")," {",n.a.createElement("br",null),"        send(",n.a.createElement("span",{className:"hljs-string"},"'confButt:cancelSubmit'"),")",n.a.createElement("br",null),"        send(confirmevent)",n.a.createElement("br",null),"      }",n.a.createElement("br",null),"    }",n.a.createElement("br",null),"  })",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"state, disabled, send"),") =>")," state.confButt.status !== ",n.a.createElement("span",{className:"hljs-string"},"'confirm'")," ",n.a.createElement("br",null),"    ? choo.view",n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),"      <button onclick=",n.a.createElement("span",{className:"hljs-subst"},"${e => send(",n.a.createElement("span",{className:"hljs-string"},"'confButt:maybeSubmit'"),")}")," disabled=",n.a.createElement("span",{className:"hljs-subst"},"${disabled}"),">Submit</button>",n.a.createElement("br",null),"    `"),n.a.createElement("br",null),"    : choo.view",n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),"      <span>",n.a.createElement("br",null),"        <button onclick=",n.a.createElement("span",{className:"hljs-subst"},"${e => send(",n.a.createElement("span",{className:"hljs-string"},"'confButt:cancelSubmit'"),")}"),">Cancel</button>",n.a.createElement("br",null),"        <button onclick=",n.a.createElement("span",{className:"hljs-subst"},"${e => send(",n.a.createElement("span",{className:"hljs-string"},"'confButt:confirmSubmit'"),")}"),">Confirm</button>",n.a.createElement("br",null),"      </span>",n.a.createElement("br",null),"    `"),n.a.createElement("br",null),"}")),n.a.createElement("p",null,"The constructor is given the ",n.a.createElement("code",null,"app")," object, and the name of the event to trigger when the user has confirmed the action (",n.a.createElement("code",null,"confirmSubmit"),"). Our model also defines the local events ",n.a.createElement("code",null,"maybeSubmit")," and ",n.a.createElement("code",null,"cancelSubmit"),". Together these three change the value of the only state variable, ",n.a.createElement("code",null,"status"),", which can be ",n.a.createElement("code",null,"waiting")," or ",n.a.createElement("code",null,"confirm"),". Whether or not we are disabled is passed as an argument to the renderer."),n.a.createElement("p",null,"In a perfect world this component should only be given its part of the app state, but for that to be possible we must leak the namespace name to the parent."),n.a.createElement("h4",{id:"the-submission-component-in-choo"},"The ",n.a.createElement("code",null,"Submission")," component in Choo"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," Submission = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"app")," =>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," confirm = Confirm(app,",n.a.createElement("span",{className:"hljs-string"},"'sub:submit'"),")",n.a.createElement("br",null),"  app.model({",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"namespace"),": ",n.a.createElement("span",{className:"hljs-string"},"'sub'"),",",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"state"),": { ",n.a.createElement("span",{className:"hljs-attr"},"field"),": ",n.a.createElement("span",{className:"hljs-string"},"''"),", ",n.a.createElement("span",{className:"hljs-attr"},"submission"),": ",n.a.createElement("span",{className:"hljs-string"},"''")," },",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"reducers"),": {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"setField"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({ ",n.a.createElement("span",{className:"hljs-attr"},"field"),": action.payload }),",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"submit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({ ",n.a.createElement("span",{className:"hljs-attr"},"field"),": ",n.a.createElement("span",{className:"hljs-string"},"''"),", ",n.a.createElement("span",{className:"hljs-attr"},"submission"),": state.field })",n.a.createElement("br",null),"    }",n.a.createElement("br",null),"  })",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"params, state, send"),") =>")," {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"const")," onChangeHandler = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"e")," =>")," send(",n.a.createElement("span",{className:"hljs-string"},"'sub:setField'"),", {",n.a.createElement("span",{className:"hljs-attr"},"payload"),":e.target.value} )",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"return")," choo.view",n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),"      <div>",n.a.createElement("br",null),"        <input value=",n.a.createElement("span",{className:"hljs-subst"},"${state.sub.field}")," oninput=",n.a.createElement("span",{className:"hljs-subst"},"${onChangeHandler}")," />",n.a.createElement("br",null),"        ",n.a.createElement("span",{className:"hljs-subst"},"${confirm(state, !state.sub.field, send)}"),n.a.createElement("br",null),"        <p>Submitted value: ",n.a.createElement("span",{className:"hljs-subst"},"${state.sub.submission}"),"</p>",n.a.createElement("br",null),"      </div>",n.a.createElement("br",null),"    `"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"The state for ",n.a.createElement("code",null,"Submission")," contains the by now familiar ",n.a.createElement("code",null,"field")," and ",n.a.createElement("code",null,"submission"),". There are only two actions, ",n.a.createElement("code",null,"setField")," and ",n.a.createElement("code",null,"submit"),". The latter is given to the child constructor (",n.a.createElement("code",null,"sub:submit"),") to be triggered from there."),n.a.createElement("h3",{id:"comparison"},"Comparison"),n.a.createElement("p",null,"We'll now bounce these implementations off one another, comparing various aspects:"),n.a.createElement("h4",{id:"comparing-rendering"},"Comparing rendering"),n.a.createElement("p",null,"Although Angular2 is using templates while React expresses the UI inline (here we use JSX), the way they render children are very similar - we express them as elements intermingled with regular DOM elements."),n.a.createElement("p",null,"Here we render ",n.a.createElement("code",null,"Confirm")," inside ",n.a.createElement("code",null,"Submission")," in ",n.a.createElement("strong",null,"React"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-jsx"},"<div>",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"xml"},n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"input")," ",n.a.createElement("span",{className:"hljs-attr"},"value"),"=",n.a.createElement("span",{className:"hljs-string"},"{this.state.field}")," ",n.a.createElement("span",{className:"hljs-attr"},"onChange"),"=",n.a.createElement("span",{className:"hljs-string"},"{this.onChange}/"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"Confirm")," ",n.a.createElement("span",{className:"hljs-attr"},"disabled"),"=",n.a.createElement("span",{className:"hljs-string"},"{!this.state.field}")," ",n.a.createElement("span",{className:"hljs-attr"},"confirm"),"=",n.a.createElement("span",{className:"hljs-string"},"{this.onConfirm}/"),">"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-tag"},"<",n.a.createElement("span",{className:"hljs-name"},"p"),">"),"Submitted value: {this.state.submission}",n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"p"),">"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-tag"},"</",n.a.createElement("span",{className:"hljs-name"},"div"),">")))),n.a.createElement("p",null,"And the corresponding lines in ",n.a.createElement("strong",null,"Angular2"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-string"},"`",n.a.createElement("br",null),'<input #field (input)="0">',n.a.createElement("br",null),'<confirm (confirm)="onConfirm()" [disabled]="!field.value.length"></confirm>',n.a.createElement("br",null),"<p>Submitted value: {{submission}}</p>",n.a.createElement("br",null),"`"))),n.a.createElement("p",null,"For both React and Angular2, ",n.a.createElement("strong",null,"communication is intimately tied to rendering"),". We pass data to the child as we render it."),n.a.createElement("p",null,"As expected ",n.a.createElement("strong",null,"CycleJS")," is an odd bird. The DOM nodes are method calls (granted, ",n.a.createElement("a",{href:"http://cycle.js.org/getting-started.html"},"we could use JSX here"),"), and the child is a stream event."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},"div([",n.a.createElement("br",null),"  input(",n.a.createElement("span",{className:"hljs-string"},"'.field'"),", {",n.a.createElement("span",{className:"hljs-attr"},"props"),":{",n.a.createElement("span",{className:"hljs-attr"},"value"),": state.field}}),",n.a.createElement("br",null),"  confirmvtree,",n.a.createElement("br",null),"  p(",n.a.createElement("span",{className:"hljs-string"},"'Submitted value: '"),"+state.submission)",n.a.createElement("br",null),"])")),n.a.createElement("p",null,"The setup for the child is somewhere else entirely. Communication is done purely through the circle (or, ",n.a.createElement("em",null,"cycle"),") of streams."),n.a.createElement("p",null,"If we look at ",n.a.createElement("strong",null,"Choo")," it seems to fall somewhere inbetween CycleJS and the others; we set up the child as we render it, but we do it through an explicit method call:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-string"},"`<div>",n.a.createElement("br",null),"  <input value=",n.a.createElement("span",{className:"hljs-subst"},"${state.sub.field}")," oninput=",n.a.createElement("span",{className:"hljs-subst"},"${onChangeHandler}")," />",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-subst"},"${confirm(state, !state.sub.field, send)}"),n.a.createElement("br",null),"  <p>Submitted value: ",n.a.createElement("span",{className:"hljs-subst"},"${state.sub.submission}"),"</p>",n.a.createElement("br",null),"</div>`"))),n.a.createElement("p",null,"Child to parent communication is done through the all-purpose ",n.a.createElement("code",null,"send")," function instead of by specific callbacks/streams as in React/Angular2."),n.a.createElement("h4",{id:"comparing-state"},"Comparing state"),n.a.createElement("p",null,"In ",n.a.createElement("strong",null,"React"),", the state of a component can be seen in the ",n.a.createElement("code",null,"getInitialState")," calls, as well as in the subsequent ",n.a.createElement("code",null,"this.setState")," setter and ",n.a.createElement("code",null,"this.state")," getter calls."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-comment"},"// In the Confirm component"),n.a.createElement("br",null),"getInitialState: ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"()"),"=>")," ({status:",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),"})",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-comment"},"// In the Submission component"),n.a.createElement("br",null),"getInitialState: ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"()"),"=>")," ({submission:",n.a.createElement("span",{className:"hljs-string"},"''"),",field:",n.a.createElement("span",{className:"hljs-string"},"''"),"})")),n.a.createElement("p",null,"We could also make the expected props in ",n.a.createElement("code",null,"Confirm")," - the ",n.a.createElement("code",null,"disabled")," boolean and ",n.a.createElement("code",null,"confirm")," callback - more clear by defining them using ",n.a.createElement("a",{href:"https://facebook.github.io/react/docs/reusable-components.html"},n.a.createElement("code",null,"propTypes")),"."),n.a.createElement("p",null,"For the ",n.a.createElement("strong",null,"Angular2")," components the state variables are directly visible as props on the classes:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-comment"},"// In the Confirm component"),n.a.createElement("br",null),"status: ",n.a.createElement("span",{className:"hljs-built_in"},"string")," = ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-meta"},"@Input"),"() ",n.a.createElement("span",{className:"hljs-keyword"},"set")," disabled(bool: ",n.a.createElement("span",{className:"hljs-built_in"},"boolean"),")",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-comment"},"// In the Submission component"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-meta"},"@ViewChild"),"(",n.a.createElement("span",{className:"hljs-string"},"'field'"),") input: Control",n.a.createElement("br",null),"field: ",n.a.createElement("span",{className:"hljs-built_in"},"string"),n.a.createElement("br",null),"submission: ",n.a.createElement("span",{className:"hljs-built_in"},"string"))),n.a.createElement("p",null,"What corresponds to ",n.a.createElement("em",null,"props")," in React are simply instance variables prefixed with ",n.a.createElement("code",null,"@Input"),"."),n.a.createElement("p",null,"In ",n.a.createElement("strong",null,"CycleJS"),", a map of the component state can be found in the seed for the ",n.a.createElement("code",null,"fold")," (elsewhere often called ",n.a.createElement("code",null,"reduce"),") call in the ",n.a.createElement("code",null,"model")," method:"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-comment"},"// In the Confirm component"),n.a.createElement("br",null),"action$.fold(",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"s,action"),")=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"switch"),"(action){",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// ...cases trunkated..."),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"},",n.a.createElement("span",{className:"hljs-string"},"'disabled'"),")  ",n.a.createElement("span",{className:"hljs-comment"},"// <---- initial state"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-comment"},"// In the Submission component"),n.a.createElement("br",null),"action$.fold(",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"state, action"),")=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"switch"),"(action.type){",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// ...cases trunkated..."),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}, {",n.a.createElement("span",{className:"hljs-attr"},"submission"),":",n.a.createElement("span",{className:"hljs-string"},"''"),",",n.a.createElement("span",{className:"hljs-attr"},"field"),":",n.a.createElement("span",{className:"hljs-string"},"''"),"}) ",n.a.createElement("span",{className:"hljs-comment"},"// <---- initial state"))),n.a.createElement("p",null,"Since we boil down all outside input from the ",n.a.createElement("code",null,"intent")," function to a single state in the ",n.a.createElement("code",null,"model")," function (which is where the ",n.a.createElement("code",null,"fold")," call is located), ",n.a.createElement("code",null,"disabled")," becomes one of the possible states for the Confirm component."),n.a.createElement("p",null,"Finally in ",n.a.createElement("strong",null,"Choo"),", the state is explicitly defined inside the object passed to ",n.a.createElement("code",null,"app.model"),":"),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-comment"},"// In the Confirm component"),n.a.createElement("br",null),"app.model({",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"state"),": { ",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'waiting'")," },",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-comment"},"// In the Submission component"),n.a.createElement("br",null),"app.model({",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-attr"},"state"),": { ",n.a.createElement("span",{className:"hljs-attr"},"field"),": ",n.a.createElement("span",{className:"hljs-string"},"''"),", ",n.a.createElement("span",{className:"hljs-attr"},"submission"),": ",n.a.createElement("span",{className:"hljs-string"},"''")," },",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"})")),n.a.createElement("h4",{id:"comparing-communication"},"Comparing communication"),n.a.createElement("p",null,"In ",n.a.createElement("strong",null,"React")," the communication is defined in the rendering, as we saw. The parent passes data and callbacks, and the child calls the callback."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-keyword"},"let")," Submission = React.createClass({",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"  onConfirm() { ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".setState({submission:",n.a.createElement("span",{className:"hljs-keyword"},"this"),".state.field,field:",n.a.createElement("span",{className:"hljs-string"},"''"),"}) },",n.a.createElement("br",null),"  render() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// passing `this.onConfirm` as `confirm` prop to child"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"let")," Confirm = React.createClass({",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"  yesimsure() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".props.confirm(); <--- calling the parent",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".setState({status:",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),"})",n.a.createElement("br",null),"  },",n.a.createElement("br",null),"  render() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// uses `this.yesimsure` as button clickhandler"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"})")),n.a.createElement("p",null,"The ",n.a.createElement("strong",null,"Angular2")," pattern is very similar, except the child-parent communication is a stream instead of a callback."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-typescript"},n.a.createElement("span",{className:"hljs-comment"},"// Confirm"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-meta"},"@Component"),"({",n.a.createElement("br",null),"  template: ",n.a.createElement("span",{className:"hljs-string"},"'...'")," ",n.a.createElement("span",{className:"hljs-comment"},"// executes `yesimsure()` on button click"),n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"export")," ",n.a.createElement("span",{className:"hljs-keyword"},"class")," Confirm {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"  yesimsure() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".confirm.emit();  <--- calling the parent",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".status = ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-comment"},"// Submission"),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-meta"},"@Component"),"({",n.a.createElement("br",null),"  template: ",n.a.createElement("span",{className:"hljs-string"},"'...'")," ",n.a.createElement("span",{className:"hljs-comment"},"// registers `onConfirm` as listener to child `confirm` prop"),n.a.createElement("br",null),"})",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"class")," Submission {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"  onConfirm() {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".submission = ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".input.nativeElement.value",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-keyword"},"this"),".input.nativeElement.value = ",n.a.createElement("span",{className:"hljs-string"},"''"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"Again, ",n.a.createElement("strong",null,"CycleJS")," is just radically different. Input and output is fully contained in the ",n.a.createElement("code",null,"sources")," and ",n.a.createElement("code",null,"sinks"),"."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," Confirm = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"sources"),"=>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," action$ = intent(sources)  ",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," state$ = model(action$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," vtree$ = view(state$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"DOM"),": vtree$,",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"submit$"),": action$.filter(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"i")," =>")," i === ",n.a.createElement("span",{className:"hljs-string"},"'CONFIRM'"),")",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-keyword"},"function")," ",n.a.createElement("span",{className:"hljs-title"},"SubmissionMain"),"(",n.a.createElement("span",{className:"hljs-params"},"sources"),")"),"{",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," action$ = intent(sources.DOM, sources.childsinks.submit$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," state$ = model(action$)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," vtree$ = view(state$, sources.childsinks.DOM)",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"DOM"),": vtree$,",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"disabled$"),": action$.map(",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"a")," =>")," a.type === ",n.a.createElement("span",{className:"hljs-string"},"'SUBMIT'")," || !a.data)",n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," Submission = withComponent(SubmissionMain,Confirm,",n.a.createElement("span",{className:"hljs-string"},"'disabled$'"),")")),n.a.createElement("p",null,"Although the full code for the CycleJS version is by far the longest of all versions, all communication is isolated to the component main functions. Here we see that ",n.a.createElement("code",null,"Confirm")," component returns a ",n.a.createElement("code",null,"submit")," stream, which through the ",n.a.createElement("code",null,"withComponent")," call will become part of the ",n.a.createElement("code",null,"sources")," for ",n.a.createElement("code",null,"Submission"),". That same call also passes the returned ",n.a.createElement("code",null,"disabled")," stream from ",n.a.createElement("code",null,"Submission")," into the ",n.a.createElement("code",null,"sources")," for ",n.a.createElement("code",null,"Confirm"),"."),n.a.createElement("p",null,n.a.createElement("img",{src:"/static/posts/composition-in-cyclejs-choo-react-and-angular2/diagrams/cyclecomm.svg",alt:"cyclecomm"})),n.a.createElement("p",null,"Finally, in ",n.a.createElement("strong",null,"Choo")," the communication is defined in the ",n.a.createElement("code",null,"effects")," and ",n.a.createElement("code",null,"reducers")," props of the ",n.a.createElement("code",null,"model")," objects."),n.a.createElement("pre",null,n.a.createElement("code",{className:"hljs language-javascript"},n.a.createElement("span",{className:"hljs-keyword"},"const")," Confirm = ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"app,confirmevent"),")=>")," {",n.a.createElement("br",null),"  app.model({",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"    reducers: {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"maybeSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'confirm'"),"}),",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"cancelSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({",n.a.createElement("span",{className:"hljs-attr"},"status"),": ",n.a.createElement("span",{className:"hljs-string"},"'waiting'"),"})",n.a.createElement("br",null),"    },",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-attr"},"effects"),": {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"confirmSubmit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state, send"),")=>")," {",n.a.createElement("br",null),"        send(",n.a.createElement("span",{className:"hljs-string"},"'confButt:cancelSubmit'"),")",n.a.createElement("br",null),"        send(confirmevent) ",n.a.createElement("span",{className:"hljs-comment"},"// <--- this will be catched by the parent"),n.a.createElement("br",null),"      }",n.a.createElement("br",null),"    }",n.a.createElement("br",null),"  })",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"state, disabled, send"),") =>")," {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// uses `send('sub:maybeSubmit/cancelSubmit/confirmSubmit')` as clickhandlers"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("span",{className:"hljs-keyword"},"const")," Submission = ",n.a.createElement("span",{className:"hljs-function"},n.a.createElement("span",{className:"hljs-params"},"app")," =>")," {",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"const")," confirm = Confirm(app,",n.a.createElement("span",{className:"hljs-string"},"'sub:submit'"),") ",n.a.createElement("span",{className:"hljs-comment"},"// <--- telling child to trigger `sub:submit`"),n.a.createElement("br",null),"  app.model({",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// ...other stuff trunkated..."),n.a.createElement("br",null),"    reducers: {",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"setField"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({ ",n.a.createElement("span",{className:"hljs-attr"},"field"),": action.payload }),",n.a.createElement("br",null),"      ",n.a.createElement("span",{className:"hljs-attr"},"submit"),": ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"action, state"),") =>")," ({ ",n.a.createElement("span",{className:"hljs-attr"},"field"),": ",n.a.createElement("span",{className:"hljs-string"},"''"),", ",n.a.createElement("span",{className:"hljs-attr"},"submission"),": state.field })",n.a.createElement("br",null),"    }",n.a.createElement("br",null),"  })",n.a.createElement("br",null),"  ",n.a.createElement("span",{className:"hljs-keyword"},"return")," ",n.a.createElement("span",{className:"hljs-function"},"(",n.a.createElement("span",{className:"hljs-params"},"params, state, send"),") =>")," {",n.a.createElement("br",null),"    ",n.a.createElement("span",{className:"hljs-comment"},"// uses `send('sub:setField') as input changehandler"),n.a.createElement("br",null),"  }",n.a.createElement("br",null),"}")),n.a.createElement("p",null,"As we noted initially, in Choo you would normally work with a single app-wide ",n.a.createElement("code",null,"app.model")," definition, which would make things more explicit but also more tightly coupled. "),n.a.createElement("h3",{id:"wrapping-up"},"Wrapping up"),n.a.createElement("p",null,"We hope you've found this comparison useful! Articles like this can easily become shallow click-bait, but at the very least we learned a lot while typing it out."),n.a.createElement("p",null,"Looking forward, I (David) am continually smitten with CycleJS, but recognize that it is still... well, impractical, to use it for bigger things. The Choo model is intriguing - it feels like React+Redux, but somehow more explicit and clear. Angular2 feels like a clumsy React, although still way more streamlined than Angular 1. And finally, when we look at these four implementations, I find it hard to not recognize the simplicity of the React model. "),n.a.createElement("p",null,"Mattias' opinion:"),n.a.createElement("p",null,"Having never written any CycleJS myself, the code for that implementation pretty much only made my head hurt in the same way as reading the word 'monad' always does. That said, seeing Davids fascination with it I might have to commit some time to get into CycleJS. Other than that I can only echo Davids opinions on the other frameworks: big ol' Angular2 doesn't do it for me and React is just so fresh, so clean (so fresh and so clean, clean). Choo is as previously stated a lot like a React+Redux app in the way state and communication is handled, and maybe because of this it doesn't feel as fitting as React does for the simple application implemented in this post. ")),n.a.createElement("hr",null))}}},[["2IS5",1,0]]]);